System\Main.s1FNAME "msx-windows.rom" 3PageSize: equ 0x4000 56 org 0x40008 Include/RomHeader.s12 db "AB" 3 dw Execute 4 dw 0 6 dw 0 8 dw 0 9 dw 0, 0, 0 10 11System\Main.s9 Include/MsxBios.s189BIOS_HWVER: equ 0x002d1112BIOS_CGTABL: equ 0x0004 13BIOS_VDP_DR: equ 0x0006 14BIOS_VDP_DW: equ 0x0007 1617BIOS_CHKRAM: equ 0x000018BIOS_SYNCHR: equ 0x000819BIOS_RDSLT: equ 0x000c20BIOS_CHRGTR: equ 0x001021BIOS_WRSLT: equ 0x001422BIOS_OUTDO: equ 0x001823BIOS_CALSLT: equ 0x001c24BIOS_DCOMPR: equ 0x002025BIOS_ENASLT: equ 0x002426BIOS_GETYPR: equ 0x002827BIOS_CALLF: equ 0x003028BIOS_KEYINT: equ 0x00383031BIOS_INITIO: equ 0x003b32BIOS_INIFNK: equ 0x003e3435BIOS_DISSCR: equ 0x004136BIOS_ENASCR: equ 0x004437BIOS_WRTVDP: equ 0x004738BIOS_RDVRM: equ 0x004a39BIOS_WRTVRM: equ 0x004d40BIOS_SETRD: equ 0x005041BIOS_SETWRT: equ 0x005342BIOS_FILVRM: equ 0x005643BIOS_LDIRMV: equ 0x005944BIOS_LDIRVM: equ 0x005c45BIOS_CHGMOD: equ 0x005f46BIOS_CHGCLR: equ 0x006247BIOS_NMI: equ 0x006648BIOS_CLRSPR: equ 0x006949BIOS_INITXT: equ 0x006c50BIOS_INIT32: equ 0x006f51BIOS_INIGRP: equ 0x007252BIOS_INIMLT: equ 0x007553BIOS_SETTXT: equ 0x007854BIOS_SETT32: equ 0x007b55BIOS_SETGRP: equ 0x007e56BIOS_SETMLT: equ 0x008157BIOS_CALPAT: equ 0x008458BIOS_CALATR: equ 0x008759BIOS_GSPSIZ: equ 0x008a60BIOS_GRPPRT: equ 0x008d6263BIOS_GICINI: equ 0x009064BIOS_WRTPSG: equ 0x009365BIOS_RDPSG: equ 0x009666BIOS_STRTMS: equ 0x00996869BIOS_CHSNS: equ 0x009c70BIOS_CHGET: equ 0x009f71BIOS_CHPUT: equ 0x00a272BIOS_LPTOUT: equ 0x00a573BIOS_LPTSTT: equ 0x00a874BIOS_CNVCHR: equ 0x00ab75BIOS_PINLIN: equ 0x00ae76BIOS_INLIN: equ 0x00b177BIOS_QINLIN: equ 0x00b478BIOS_BREAKX: equ 0x00b779BIOS_BEEP: equ 0x00c080BIOS_CLS: equ 0x00c381BIOS_POSIT: equ 0x00c682BIOS_FNKSB: equ 0x00c983BIOS_ERAFNK: equ 0x00cc84BIOS_DSPFNK: equ 0x00cf85BIOS_TOTEXT: equ 0x00d28788BIOS_GTSTCK: equ 0x00d589BIOS_GTTRIG: equ 0x00d890BIOS_GTPAD: equ 0x00db91BIOS_GTPDL: equ 0x00de9394BIOS_TAPION: equ 0x00e195BIOS_TAPIN: equ 0x00e496BIOS_TAPIOF: equ 0x00e797BIOS_TAPOON: equ 0x00ea98BIOS_TAPOUT: equ 0x00ed99BIOS_TAPOOF: equ 0x00f0100BIOS_STMOTR: equ 0x00f3102103BIOS_CHGCAP: equ 0x0132104BIOS_CHGSND: equ 0x0135105BIOS_RSLREG: equ 0x0138106BIOS_WSLREG: equ 0x013b107BIOS_RDVDP: equ 0x013e108BIOS_SNSMAT: equ 0x0141109BIOS_PHYDIO: equ 0x0144110BIOS_ISFLIO: equ 0x014a111BIOS_OUTDLP: equ 0x014d112BIOS_KILBUF: equ 0x0156113BIOS_CALBAS: equ 0x0159115116BIOS_SUBROM: equ 0x015c117BIOS_EXTROM: equ 0x015f118BIOS_EOL: equ 0x0168119BIOS_BIGFIL: equ 0x016b120BIOS_NSETRD: equ 0x016e121BIOS_NSTWRT: equ 0x0171122BIOS_NRDVRM: equ 0x0174123BIOS_NWRVRM: equ 0x0177125126BIOS_GRPRT: equ 0x0089127BIOS_NVBXLN: equ 0x00c9128BIOS_NVBXFL: equ 0x00cd129BIOS_CLSSUB: equ 0x0115130BIOS_VDPSTA: equ 0x0131131BIOS_SETPAG: equ 0x013d132BIOS_INIPLT: equ 0x0141133BIOS_RSTPLT: equ 0x0145134BIOS_GETPLT: equ 0x0149135BIOS_SETPLT: equ 0x014d136BIOS_PROMPT: equ 0x0181137BIOS_NEWPAD: equ 0x01ad138BIOS_CHGMDP: equ 0x01b5139BIOS_KNJPRT: equ 0x01bd140BIOS_REDCLK: equ 0x01f5141BIOS_WRTCLK: equ 0x01f9143144BIOS_RDPRIM: equ 0xf380145BIOS_WRPRIM: equ 0xf385146BIOS_CLPRIM: equ 0xf38c148149BIOS_USRTAB: equ 0xf39a150BIOS_LINL40: equ 0xf3ae151BIOS_LINL32: equ 0xf3af152BIOS_LINLEN: equ 0xf3b0153BIOS_CRTCNT: equ 0xf3b1154BIOS_CLMLST: equ 0xf3b2156157BIOS_TXTNAM: equ 0xf3b3158BIOS_TXTCOL: equ 0xf3b5159BIOS_TXTCGP: equ 0xf3b7160BIOS_TXTATR: equ 0xf3b9161BIOS_TXTPAT: equ 0xf3bb163164BIOS_T32NAM: equ 0xf3bd165BIOS_T32COL: equ 0xf3bf166BIOS_T32CGP: equ 0xf3c1167BIOS_T32ATR: equ 0xf3c3168BIOS_T32PAT: equ 0xf3c5170171BIOS_GRPNAM: equ 0xf3c7172BIOS_GRPCOL: equ 0xf3c9173BIOS_GRPCGP: equ 0xf3cb174BIOS_GRPATR: equ 0xf3cd175BIOS_GRPPAT: equ 0xf3cf177178BIOS_MLTNAM: equ 0xf3d1179BIOS_MLTCOL: equ 0xf3d3180BIOS_MLTCGP: equ 0xf3d5181BIOS_MLTATR: equ 0xf3d7182BIOS_MLTPAT: equ 0xf3d9184185BIOS_CLIKSW: equ 0xf3db186BIOS_CSRY: equ 0xf3dc187BIOS_CSRX: equ 0xf3dd188BIOS_CNSDFG: equ 0xf3de190191BIOS_RG0SAV: equ 0xf3df192BIOS_RG1SAV: equ 0xf3e0193BIOS_RG2SAV: equ 0xf3e1194BIOS_RG3SAV: equ 0xf3e2195BIOS_RG4SAV: equ 0xf3e3196BIOS_RG5SAV: equ 0xf3e4197BIOS_RG6SAV: equ 0xf3e5198BIOS_RG7SAV: equ 0xf3e6199BIOS_RG8SAV: equ 0xffe7200BIOS_RG9SAV: equ 0xffe8201BIOS_STATFL: equ 0xf3e7202BIOS_TRGFLG: equ 0xf3e8203BIOS_FORCLR: equ 0xf3e9204BIOS_BAKCLR: equ 0xf3ea205BIOS_BDRCLR: equ 0xf3eb206BIOS_MAXUPD: equ 0xf3ec207BIOS_MINUPD: equ 0xf3ef208BIOS_ATRBYT: equ 0xf3f2210211BIOS_QUEUES: equ 0xf3f3212BIOS_FRCNEW: equ 0xf3f5214215BIOS_SCNCNT: equ 0xf3f6216BIOS_REPCNT: equ 0xf3f7217BIOS_PUTPNT: equ 0xf3f8218BIOS_GETPNT: equ 0xf3fa220221BIOS_CS120: equ 0xf3fc222BIOS_LOW: equ 0xf406223BIOS_HIGH: equ 0xf408224BIOS_HEADER: equ 0xf40a225BIOS_ASPCT1: equ 0xf40b226BIOS_ASPCT2: equ 0xf40d227BIOS_ENDPRG: equ 0xf40f229230BIOS_ERRFLG: equ 0xf414231BIOS_LPTPOS: equ 0xf415232BIOS_PRTFLG: equ 0xf416233BIOS_NTMSXP: equ 0xf417234BIOS_RAWPRT: equ 0xf418235BIOS_VLZADR: equ 0xf419236BIOS_VLZDAT: equ 0xf41b237BIOS_CURLIN: equ 0xf41c238BIOS_KBUF: equ 0xf41f239BIOS_BUFMIN: equ 0xf55d240BIOS_BUF: equ 0xf55e241BIOS_ENDBUF: equ 0xf660242BIOS_TTYPOS: equ 0xf661243BIOS_DIMFLG: equ 0xf662244BIOS_VALTYP: equ 0xf663245BIOS_DORES: equ 0xf664246BIOS_DONUM: equ 0xf665247BIOS_CONTXT: equ 0xf666248BIOS_CONSAV: equ 0xf668249BIOS_CONTYP: equ 0xf669250BIOS_CONLO: equ 0xf66a251BIOS_MEMSIZ: equ 0xf672252BIOS_STKTOP: equ 0xf674253BIOS_TXTTAB: equ 0xf676254BIOS_TEMPPT: equ 0xf768255BIOS_TEMPST: equ 0xf67a256BIOS_DSCTMP: equ 0xf698257BIOS_FRETOP: equ 0xf69b258BIOS_TEMP3: equ 0xf69d259BIOS_TEMP8: equ 0xf69f260BIOS_ENDFOR: equ 0xf6a1261BIOS_SUBFLG: equ 0xf6a5262BIOS_FLGINP: equ 0xf6a6263BIOS_TEMP: equ 0xf6a7264BIOS_PTRFLG: equ 0xf6a9265BIOS_AUTFLG: equ 0xf6aa266BIOS_AUTLIN: equ 0xf6ab267BIOS_AUTINC: equ 0xf6ad268BIOS_SAVTXT: equ 0xf6af269BIOS_ERRLIN: equ 0xf6b3270BIOS_DOT: equ 0xf6b5271BIOS_ERRTXT: equ 0xf6b7272BIOS_ONELIN: equ 0xf6b9273BIOS_ONEFLG: equ 0xf6bb274BIOS_TEMP2: equ 0xf6bc275BIOS_OLDLIN: equ 0xf6be276BIOS_OLDTXT: equ 0xf6c0277BIOS_VARTAB: equ 0xf6c2278BIOS_ARYTAB: equ 0xf6c4279BIOS_STREND: equ 0xf6c6280BIOS_DATPTR: equ 0xf6c8281BIOS_DEFTBL: equ 0xf6ca282BIOS_PRMSTK: equ 0xf6e4283BIOS_PRMLEN: equ 0xf6e6284BIOS_PARM1: equ 0xf6e8285BIOS_PRMPRV: equ 0xf74c286BIOS_PRMLN2: equ 0xf74e287BIOS_PARM2: equ 0xf750288BIOS_PRMFLG: equ 0xf7b4289BIOS_ARYTA2: equ 0xf7b5290BIOS_NOFUNS: equ 0xf7b7291BIOS_TEMP9: equ 0xf7b8292BIOS_FUNACT: equ 0xf7ba293BIOS_SWPTMP: equ 0xf7bc294BIOS_TRCFLG: equ 0xf7c4296297BIOS_FBUFFR: equ 0xf7c5298BIOS_DECTMP: equ 0xf7f0299BIOS_DECTM2: equ 0xf7f2300BIOS_DECCNT: equ 0xf7f4301BIOS_DAC: equ 0xf7f6302BIOS_HOLD8: equ 0xf806303BIOS_HOLD2: equ 0xf836304BIOS_HOLD: equ 0xf83e305BIOS_ARG: equ 0xf847306BIOS_RNDX: equ 0xf857308309BIOS_USRDATA: equ 0xf7f8311312BIOS_MAXFIL: equ 0xf85f313BIOS_FILTAB: equ 0xf860314BIOS_NULBUF: equ 0xf862315BIOS_PTRFIL: equ 0xf864316BIOS_RUNFLG: equ 0xf866317BIOS_FILNAM: equ 0xf866318BIOS_FILNM2: equ 0xf871319BIOS_NLONLY: equ 0xf87c320BIOS_SAVEND: equ 0xf87d321BIOS_FNKSTR: equ 0xf87f322BIOS_CGPNT: equ 0xf91f323BIOS_NAMBAS: equ 0xf922324BIOS_CGPBAS: equ 0xf924325BIOS_PATBAS: equ 0xf926326BIOS_ATRBAS: equ 0xf928327BIOS_CLOC: equ 0xf92a328BIOS_CMASK: equ 0xf92c329BIOS_MINDEL: equ 0xf92d330BIOS_MAXDEL: equ 0xf92f332333BIOS_ASPECT: equ 0xf931334BIOS_CENCNT: equ 0xf933335BIOS_CLINEF: equ 0xf935336BIOS_CNPNTS: equ 0xf936337BIOS_CPLOTF: equ 0xf938338BIOS_CPCNT: equ 0xf939339BIOS_CPNCNT8: equ 0xf93b340BIOS_CPCSUM: equ 0xf93d341BIOS_CSTCNT: equ 0xf93f342BIOS_CSCLXY: equ 0xf941343BIOS_CSAVEA: equ 0xf942344BIOS_CSAVEM: equ 0xf944345BIOS_CXOFF: equ 0xf945346BIOS_CYOFF: equ 0xf947348349BIOS_LOHMSK: equ 0xf949350BIOS_LOHDIR: equ 0xf94a351BIOS_LOHADR: equ 0xf94b352BIOS_LOHCNT: equ 0xf94d353BIOS_SKPCNT: equ 0xf94f354BIOS_MIVCNT: equ 0xf951355BIOS_PDIREC: equ 0xf953356BIOS_LFPROG: equ 0xf954357BIOS_RTPROG: equ 0xf955359360BIOS_MCLTAB: equ 0xf956361BIOS_MCLFLG: equ 0xf958362BIOS_QUETAB: equ 0xf959363BIOS_QUEBAK: equ 0xf971364BIOS_VOICAQ: equ 0xf975365BIOS_VOICBQ: equ 0xf9f5366BIOS_VOICCQ: equ 0xfa75368369BIOS_DPPAGE: equ 0xfaf5370BIOS_ACPAGE: equ 0xfaf6371BIOS_AVCSAV: equ 0xfaf7372BIOS_EXBRSA: equ 0xfaf8373BIOS_CHRCNT: equ 0xfaf9374BIOS_ROMA: equ 0xfafa375BIOS_MODE: equ 0xfafc376BIOS_NORUSE: equ 0xfafd377BIOS_XSAVE: equ 0xfafe378BIOS_YSAVE: equ 0xfb00379BIOS_LOGOPR: equ 0xfb02381382BIOS_RSTMP: equ 0xfb03383BIOS_TOCNT: equ 0xfb03384BIOS_RSFCB: equ 0xfb04385BIOS_RSIQLN: equ 0xfb06386BIOS_MEXBIH: equ 0xfb07387BIOS_OLDSTT: equ 0xfb0c388BIOS_OLDINT: equ 0xfb12389BIOS_DEVNUM: equ 0xfb17390BIOS_DATCNT: equ 0xfb18391BIOS_ERRORS: equ 0xfb1b392BIOS_FLAGS: equ 0xfb1c393BIOS_ESTBLS: equ 0xfb1d394BIOS_COMMSK: equ 0xfb1e395BIOS_LSTCOM: equ 0xfb1f396BIOS_LSTMOD: equ 0xfb20398399BIOS_PRSCNT: equ 0xfb35400BIOS_SAVSP: equ 0xfb36401BIOS_VOICEN: equ 0xfb38402BIOS_SAVVOL: equ 0xfb39403BIOS_MCLLEN: equ 0xfb3b404BIOS_MCLPTR: equ 0xfb3c405BIOS_QUEUEN: equ 0xfb3e406BIOS_MUSICF: equ 0xfc3f407BIOS_PLYCNT: equ 0xfb40409410BIOS_VCBA: equ 0xfb41411BIOS_VCBB: equ 0xfb66412BIOS_VCBC: equ 0xfb8b414415BIOS_ENSTOP: equ 0xfbb0416BIOS_BASROM: equ 0xfbb1417BIOS_LINTTB: equ 0xfbb2418BIOS_FSTPOS: equ 0xfbca419BIOS_CODSAV: equ 0xfbcc420BIOS_FNKSW1: equ 0xfbcd421BIOS_FNKFLG: equ 0xfbce422BIOS_ONGSBF: equ 0xfbd8423BIOS_CLIKFL: equ 0xfbd9424BIOS_OLDKEY: equ 0xfbda425BIOS_NEWKEY: equ 0xfbe5426BIOS_KEYBUF: equ 0xfbf0427BIOS_LINWRK: equ 0xfc18428BIOS_PATWRK: equ 0xfc40429BIOS_BOTTOM: equ 0xfc48430BIOS_HIMEM: equ 0xfc4a431BIOS_TRAPTBL: equ 0xfc4c432BIOS_RTYCNT: equ 0xfc9a433BIOS_INTFLG: equ 0xfc9b434BIOS_PADY: equ 0xfc9c435BIOS_PADX: equ 0xfc9d436BIOS_JIFFY: equ 0xfc9e437BIOS_INTVAL: equ 0xfca0438BIOS_INTCNT: equ 0xfca2439BIOS_LOWLIM: equ 0xfca4440BIOS_WINWID: equ 0xfca5441BIOS_GRPHED: equ 0xfca6442BIOS_ESCCNT: equ 0xfca7443BIOS_INSFLG: equ 0xfca8444BIOS_CSRSW: equ 0xfca9445BIOS_CSTYLE: equ 0xfcaa446BIOS_CAPST: equ 0xfcab447BIOS_KANAST: equ 0xfcac448BIOS_KANAMD: equ 0xfcad449BIOS_FLBMEM: equ 0xfcae450BIOS_SCRMOD: equ 0xfcaf451BIOS_OLDSCR: equ 0xfcb0452BIOS_CASPRV: equ 0xfcb1453BIOS_BRDATR: equ 0xfcb2454BIOS_GXPOS: equ 0xfcb3455BIOS_GYPOS: equ 0xfcb5456BIOS_GRPACX: equ 0xfcb7457BIOS_GRPACY: equ 0xfcb9458BIOS_DRWFLG: equ 0xfcbb459BIOS_DRWSCL: equ 0xfcbc460BIOS_DRWANG: equ 0xfcbd461BIOS_RUNBNF: equ 0xfcbe462BIOS_SAVENT: equ 0xfcbf463BIOS_ROMSLT: equ 0xfcc0464BIOS_EXPTBL: equ 0xfcc1465BIOS_SLTTBL: equ 0xfcc5466BIOS_SLTATR: equ 0xfcc9467BIOS_SLTWRK: equ 0xfd09468BIOS_PROCNM: equ 0xfd89469BIOS_DEVICE: equ 0xfd99471472BIOS_H_KEYI: equ 0xfd9a473BIOS_H_TIMI: equ 0xfd9f474BIOS_H_CHPH: equ 0xfda4475BIOS_H_DSPC: equ 0xfda9476BIOS_H_ERAC: equ 0xfdae477BIOS_H_DSPF: equ 0xfdb3478BIOS_H_ERAF: equ 0xfdb8479BIOS_H_TOTE: equ 0xfdbd480BIOS_H_CHGE: equ 0xfdc2481BIOS_H_INIP: equ 0xfdc7482BIOS_H_KEYC: equ 0xfdcc483BIOS_H_KYEA: equ 0xfdd1484BIOS_H_NMI: equ 0xfdd6485BIOS_H_PINL: equ 0xfddb486BIOS_H_QINL: equ 0xfde0487BIOS_H_INLI: equ 0xfde5488BIOS_H_ONGO: equ 0xfdea489BIOS_H_DSKO: equ 0xfdef490BIOS_H_SETS: equ 0xfdf4491BIOS_H_NAME: equ 0xfdf9492BIOS_H_KILL: equ 0xfdfe493BIOS_H_IPL: equ 0xfe03494BIOS_H_COPY: equ 0xfe08495BIOS_H_CMD: equ 0xfe0d496BIOS_H_DSKF: equ 0xfe12497BIOS_H_DSKI: equ 0xfe17498BIOS_H_ATTR: equ 0xfe1c499BIOS_H_LSET: equ 0xfe21500BIOS_H_RSET: equ 0xfe26501BIOS_H_FIEL: equ 0xfe2b502BIOS_H_MKI: equ 0xfe30503BIOS_H_MKS: equ 0xfe35504BIOS_H_MKD: equ 0xfe3a505BIOS_H_CVI: equ 0xfe3f506BIOS_H_CVS: equ 0xfe44507BIOS_H_CVD: equ 0xfe49508BIOS_H_GETP: equ 0xfe4e509BIOS_H_SETF: equ 0xfe53510BIOS_H_NOFO: equ 0xfe58511BIOS_H_NULO: equ 0xfe5d512BIOS_H_NTFL: equ 0xfe62513BIOS_H_MERG: equ 0xfe67514BIOS_H_SAVE: equ 0xfe6c515BIOS_H_BINS: equ 0xfe71516BIOS_H_BINL: equ 0xfe76517BIOS_H_FILE: equ 0xfd7b518BIOS_H_DGET: equ 0xfe80519BIOS_H_FILO: equ 0xfe85520BIOS_H_INDS: equ 0xfe8a521BIOS_H_RSLF: equ 0xfe8f522BIOS_H_SAVD: equ 0xfe94523BIOS_H_LOC: equ 0xfe99524BIOS_H_LOF: equ 0xfe9e525BIOS_H_EOF: equ 0xfea3526BIOS_H_FPOS: equ 0xfea8527BIOS_H_BAKU: equ 0xfead528BIOS_H_PARD: equ 0xfeb2529BIOS_H_NODE: equ 0xfeb7530BIOS_H_POSD: equ 0xfebc531BIOS_H_DEVN: equ 0xfec1532BIOS_H_GEND: equ 0xfec6533BIOS_H_RUNC: equ 0xfecb534BIOS_H_CLEAR: equ 0xfed0535BIOS_H_LOPD: equ 0xfed5536BIOS_H_STKE: equ 0xfeda537BIOS_H_ISFL: equ 0xfedf538BIOS_H_OUTD: equ 0xfee4539BIOS_H_CRDO: equ 0xfee9540BIOS_H_DSKC: equ 0xfeee541BIOS_H_DOGR: equ 0xfef3542BIOS_H_PRGE: equ 0xfef8543BIOS_H_ERRP: equ 0xfefd544BIOS_H_ERRF: equ 0xff02545BIOS_H_READ: equ 0xff07546BIOS_H_MAIN: equ 0xff0c547BIOS_H_DIRD: equ 0xff11548BIOS_H_FINI: equ 0xff16549BIOS_H_FINE: equ 0xff1b550BIOS_H_CRUN: equ 0xff20551BIOS_H_CRUS: equ 0xff25552BIOS_H_ISRE: equ 0xff2a553BIOS_H_NTFN: equ 0xff2f554BIOS_H_NOTR: equ 0xff34555BIOS_H_SNGF: equ 0xff39556BIOS_H_NEWS: equ 0xff3e557BIOS_H_GONE: equ 0xff43558BIOS_H_CHRG: equ 0xff48559BIOS_H_RETU: equ 0xff4d560BIOS_H_PRTF: equ 0xff52561BIOS_H_COMP: equ 0xff57562BIOS_H_FINP: equ 0xff5c563BIOS_H_TRMN: equ 0xff61564BIOS_H_FRME: equ 0xff66565BIOS_H_NTPL: equ 0xff6b566BIOS_H_EVAL: equ 0xff70567BIOS_H_OKNO: equ 0xff75568BIOS_H_FING: equ 0xff7a569BIOS_H_ISMI: equ 0xff7f570BIOS_H_WIDT: equ 0xff84571BIOS_H_LIST: equ 0xff89572BIOS_H_BUFL: equ 0xff8e573BIOS_H_FRQI: equ 0xff93574BIOS_H_SCNE: equ 0xff98575BIOS_H_FRET: equ 0xff9d576BIOS_H_PTRG: equ 0xffa2577BIOS_H_PHYD: equ 0xffa7578BIOS_H_FORM: equ 0xffac579BIOS_H_ERRO: equ 0xffb1580BIOS_H_LPTO: equ 0xffb6581BIOS_H_LPTS: equ 0xffbb582BIOS_H_SCRE: equ 0xffc0583BIOS_H_PLAY: equ 0xffc5585586BIOS_FCALL: equ 0xffca587BIOS_DISINT: equ 0xffcf588BIOS_ENAINT: equ 0xffd4592597598HKEYI: equ $fd9a 599HTIMI: equ $fd9f 601HOOK_SIZE: equ HTIMI - HKEYI604605MSXID1: equ $002b 609MSXID2: equ $002c 612MSXID3: equ $002d 617MSXID4: equ $002e 618MSXID5: equ $002f 619System\Main.s10 Include/MsxConstants.s1PORT_0: equ 0x982PORT_1: equ 0x993PORT_2: equ 0x9a4PORT_3: equ 0x9b78PPI.A: equ $a8 10PPI.B: equ $a9 11PPI.C: equ $aa 17PPI.R: equ $ab 2428REG0SAV: equ 0xF3DF29REG1SAV: equ 0xF3E030REG2SAV: equ 0xF3E131REG3SAV: equ 0xF3E232REG4SAV: equ 0xF3E333REG5SAV: equ 0xF3E434REG6SAV: equ 0xF3E535REG7SAV: equ 0xF3E637REG8SAV: equ 0xFFE738REG9SAV: equ 0xFFE839REG10SAV: equ 0xFFE940REG11SAV: equ 0xFFEA41REG12SAV: equ 0xFFEB42REG13SAV: equ 0xFFEC43REG14SAV: equ 0xFFED44REG15SAV: equ 0xFFEE45REG16SAV: equ 0xFFEF46REG17SAV: equ 0xFFF047REG18SAV: equ 0xFFF148REG19SAV: equ 0xFFF249REG20SAV: equ 0xFFF350REG21SAV: equ 0xFFF451REG22SAV: equ 0xFFF552REG23SAV: equ 0xFFF65456REG25SAV: equ 0xFFFA57REG26SAV: equ 0xFFFB58REG27SAV: equ 0xFFFC59System\Main.s11 Include/CommonRoutines.s149ClearRam:10 ld hl, RamStart 11 ld de, RamEnd + 1 13.loop:14 xor a 15 ld (hl), a17 inc hl18 call BIOS_DCOMPR 19 ret z20 jp .loop2427ClearRamArea:28 xor a29.loop:30 ld (hl), a31 inc hl32 djnz .loop34 ret3842SetPaletteColor:43 push bc44 45 ld b, a 46 ld c, 16 47 call BIOS_WRTVDP48 ld c, PORT_2 49 pop de51 ld a, d 52 di53 out (c), a54 ld a, e 55 ei56 out (c), a58 ret6064SetPaletteColor_Without_DI_EI:65 push bc66 67 ld b, a 68 ld c, 16 69 call WRTVDP_without_DI_EI70 ld c, PORT_2 71 pop de73 ld a, d 75 out (c), a76 ld a, e 78 out (c), a80 ret8388SetPaletteColor_FromAddress:89 90 ld b, a 91 ld c, 16 92 call BIOS_WRTVDP93 ld c, PORT_2 95 ld a, (hl) 96 di97 out (c), a98 inc hl99 ld a, (hl) 100 ei101 out (c), a103 ret107108LoadPalette:109 110 ld b, 0 111 ld c, 16 112 call BIOS_WRTVDP113 ld c, PORT_2 115 ld b, 16116.loop:117 di118 ld a, (hl)119 out (c), a120 inc hl121 ld a, (hl)122 out (c), a123 ei124 inc hl125 djnz .loop126 127 ret131132EnableRomPage2:133135 call BIOS_RSLREG136 rrca137 rrca138 and 3 139 ld c,a140 ld b,0141 ld hl, BIOS_EXPTBL142 add hl,bc143 ld a,(hl)144 and 80h145 or c146 ld c,a147 inc hl148 inc hl149 inc hl150 inc hl151 ld a,(hl)152 and 0Ch153 or c154 ld h,080h155 call BIOS_ENASLT 157 ret160164Wait_B_Vblanks:165 166 push bc167 168 .loop:170 ld a, (BIOS_JIFFY)171 ld c, a172 .waitVBlank:173 ld a, (BIOS_JIFFY)174 cp c175 jp z, .waitVBlank177 djnz .loop178 179 pop bc181 ret183Wait_15_Vblanks:184 ld c, 15186 .loop:187 ld a, (BIOS_JIFFY)188 ld b, a189 .waitVBlank:190 ld a, (BIOS_JIFFY)191 cp b192 jp z, .waitVBlank194 dec c195 jp nz, .loop197 ret199Wait_Vblank:200.loop:201 ld a, (BIOS_JIFFY)202 ld b, a203.waitVBlank:204 ld a, (BIOS_JIFFY)205 cp b206 jp z, .waitVBlank208 ret210214SetVdp_Write:216 225 rlc h226 rla227 rlc h228 rla229 srl h230 srl h232 di233 234 out (PORT_1), a235 ld a, 14 + 128236 out (PORT_1), a238 239 ld a, l240 nop241 out (PORT_1), a242 ld a, h243 or 64244 ei245 out (PORT_1),a246 ret248252SetVdp_Read:253 rlc h254 rla255 rlc h256 rla257 srl h258 srl h259 di260 out (PORT_1), a261 ld a, 14 + 128262 out (PORT_1), a263 ld a, l264 nop265 out (PORT_1), a266 ld a, h267 ei268 out (PORT_1), a269 ret272280301 302304306308310315323331334ClearVram_MSX2:335 xor a 336 ld hl, 0 337 call SetVDP_Write339349 xor a351 355 356 ld d, 2 357.loop_2:358 ld c, 0 359.loop_1:360 ld b, 0 361.loop:362 out (PORT_0), a363 djnz .loop364 dec c365 jp nz, .loop_1366 dec d367 jp nz, .loop_2369 ret372Screen11:373 375 ld a, 8376 call BIOS_CHGMOD378 ld a, (REG25SAV)379 or 0001 1000 b380 ld (REG25SAV), a 381 ld b, a382 383 ld c, 25 384 call BIOS_WRTVDP385 ret387SetSprites16x16:388 ld a, (REG1SAV)389 or 0000 0010 b390 ld (REG1SAV), a391 ld b, a392 ld c, 1 393 call BIOS_WRTVDP394 ret396Set192Lines:397 401 ld a, (REG9SAV)402 and 0111 1111 b403 ld (REG9SAV), a404 ld b, a405 ld c, 9 406 call BIOS_WRTVDP407 ret409SetColor0ToNonTransparent:410 415 ld a, (REG8SAV)416 or 0010 0000 b417 ld b, 0010 1000 b 418 ld c, 0x08 419 call BIOS_WRTVDP420 ret422SetColor0ToTransparent:423 427 ld a, (REG8SAV)428 and 1101 1111 b429 ld (REG8SAV), a430 ld b, a431 ld c, 8 432 call BIOS_WRTVDP433 ret435DisableSprites:436 ld a, (REG8SAV)437 or 0000 0010 b438 ld b, a439 ld c, 8 440 call BIOS_WRTVDP441 ret443EnableSprites:444 ld a, (REG8SAV)445 and 1111 1101 b446 ld b, a447 ld c, 8 448 call BIOS_WRTVDP449 ret451455LDIRVM_MSX2:456 457 ex de, hl458 459 call SetVdp_Write460 ex de, hl461 ld d, c462 463 ld c, PORT_0 464 ld b, 0465.loop_1:466 otir467 dec d468 jp nz, .loop_1469 ret473479RandomNumber:480 push hl481 ld hl, (Seed)482 add hl, hl483 sbc a, a484 and 0x83485 xor l486 ld l, a487 ld (Seed), hl488 pop hl489 ret491 500 504510CheckCollision_16x16_16x16:512 ld a, d 513 sub b 514 jr c, .x1IsLarger 515 sub 16 516 ret nc 517 jp .checkVerticalCollision518.x1IsLarger:519 neg 524 525 sub 16 526 ret nc 528.checkVerticalCollision:529 ld a, e 530 sub c 531 jr c, .y1IsLarger 532 sub 16 533 ret 534.y1IsLarger:535 neg 540 541 sub 16 542 ret 546552CheckCollision_16x16_32x16:554 ld a, d 555 sub b 556 jr c, .x1IsLarger 557 sub 16 558 ret nc 559 jp .checkVerticalCollision560.x1IsLarger:561 neg 566 567 sub 32 568 ret nc 570.checkVerticalCollision:571 ld a, e 572 sub c 573 jr c, .y1IsLarger 574 sub 16 575 ret 576.y1IsLarger:577 neg 582 583 sub 16 584 ret 589595CheckCollision_8x8_16x16:597 ld a, d 598 sub b 599 jr c, .x1IsLarger 600 sub 8 601 ret nc 602 jp .checkVerticalCollision603.x1IsLarger:604 neg 609 610 sub 16 611 ret nc 613.checkVerticalCollision:614 ld a, e 615 sub c 616 jr c, .y1IsLarger 617 sub 8 618 ret 619.y1IsLarger:620 neg 625 626 sub 16 627 ret 633635641CheckCollision_Point_16x16:643 647 648 ld a, d649 cp b650 ret nc 652 ld a, b653 add 16 654 cp d655 ret nc 657 658 ld a, e659 cp c660 ret nc 662 665 ld a, e666 add 16667 ld e, a668 ld a, c669 cp e670 ret672 676 680 683 689694697707711714717722 723725732736738746 747755761768774777784790798800808815822825831833 835843848853857860871878883888891898903905911914916920924926929932935940 941944947 948953957960965 966969971 972977981985Execute_VDP_LMMM:986Execute_VDP_HMMM:987 ld a, 32 988 di989 out (PORT_1), a990 ld a, 17 + 128991 out (PORT_1), a992 ld c, 0x9B993.vdpReady:994 ld a, 2995 di996 out (PORT_1), a 997 ld a, 15 + 128998 out (PORT_1), a999 in a, (PORT_1)1000 rra1001 ld a, 0 1002 out (PORT_1), a1003 ld a, 15 + 1281004 ei1005 out (PORT_1), a 1006 jp c, .vdpReady1007 outi 1008 outi 1009 outi1010 outi1011 outi1012 outi1013 outi1014 outi1015 outi1016 outi1017 outi1018 outi1019 outi1020 outi1021 outi1022 ret10241028Execute_VDP_PSET:1029Execute_VDP_LINE:1030Execute_VDP_HMMV:1031 ld a, 36 1032 di1033 out (PORT_1), a1034 ld a, 17 + 1281035 out (PORT_1), a1036 ld c, 0x9B1037.vdpReady:1038 ld a, 21039 di1040 out (PORT_1), a 1041 ld a, 15 + 1281042 out (PORT_1), a1043 in a, (PORT_1)1044 rra1045 ld a, 0 1046 out (PORT_1), a1047 ld a, 15 + 1281048 ei1049 out (PORT_1), a 1050 jp c, .vdpReady1051 outi 1052 outi 1053 outi1054 outi1055 outi1056 outi1057 outi1058 outi1059 outi1060 outi1061 outi1062 ret10651068Execute_VDP_YMMM:1069 ld a, 34 1070 di1071 out (PORT_1), a1072 ld a, 17 + 1281073 out (PORT_1), a1074 ld c, 0x9B1075.vdpReady:1076 ld a, 21077 di1078 out (PORT_1), a 1079 ld a, 15 + 1281080 out (PORT_1), a1081 in a, (PORT_1)1082 rra1083 ld a, 0 1084 out (PORT_1), a1085 ld a, 15 + 1281086 ei1087 out (PORT_1), a 1088 jp c, .vdpReady1089 outi 1090 outi 1091 outi1092 outi1093 outi1094 outi1095 outi1096 outi1097 outi1098 outi1099 outi1100 outi1101 outi1102 ret1104VDP_COMMAND_HMMC: equ 1111 0000 b 1105VDP_COMMAND_YMMM: equ 1110 0000 b 1106VDP_COMMAND_HMMM: equ 1101 0000 b 1107VDP_COMMAND_HMMV: equ 1100 0000 b 11091110VDP_COMMAND_LMMC: equ 1011 0000 b 1111VDP_COMMAND_LMCM: equ 1010 0000 b 1112VDP_COMMAND_LMMM: equ 1001 0000 b 1113VDP_COMMAND_LMMV: equ 1000 0000 b 1115VDP_COMMAND_LINE: equ 0111 0000 b1116VDP_COMMAND_SRCH: equ 0110 0000 b1117VDP_COMMAND_PSET: equ 0101 0000 b1118VDP_COMMAND_POINT: equ 0100 0000 b1120VDP_COMMAND_STOP: equ 0000 0000 b11231124VDP_LOGIC_OPERATION_IMP: equ 0000 b1125VDP_LOGIC_OPERATION_AND: equ 0001 b1126VDP_LOGIC_OPERATION_OR: equ 0010 b1127VDP_LOGIC_OPERATION_XOR: equ 0011 b1128VDP_LOGIC_OPERATION_NOT: equ 0100 b1130VDP_LOGIC_OPERATION_TIMP: equ 1000 b1131VDP_LOGIC_OPERATION_TAND: equ 1001 b1132VDP_LOGIC_OPERATION_TOR: equ 1010 b1133VDP_LOGIC_OPERATION_TXOR: equ 1011 b1134VDP_LOGIC_OPERATION_TNOT: equ 1100 b11391143ReadStatusReg:11441145 ld a,(0007h) 1146 inc a1147 ld c,a 1149 out (c),b1150 ld a,080h+151151 out (c),a11521153 1154 ld a,(0006h) 1155 inc a1156 ld c,a 1157 in b,(c) 1158 11591160 ld a,(0007h) 1161 inc a1162 ld c,a 1163 xor a1164 out (c),a1165 ld a,080h+151166 out (c),a1167 1169 ret11721173WRTVDP_without_DI_EI:1174 ld a, b1175 1176 out (PORT_1),a1177 ld a, c1178 or 1281179 1181 out (PORT_1), a1182 ret11861189SNSMAT_NO_DI_EI:1190 ld c, a1191.C_OK:11921193 in a, (PPI.C)1194 and 0xf0 1195 or c11961197 out (PPI.C), a1198 in a, (PPI.B)1199 ret120212051207JP_HL:1208 jp (hl)1209JP_BC:1210 push bc1211 ret1212JP_DE:1213 push de1214 ret1215JP_IX:1216 jp (ix)1217JP_IY:1218 jp (iy)1219JP_HL_S:1220 exx1221 push hl1222 exx1223 ret1224JP_BC_S:1225 exx1226 push bc1227 exx1228 ret1229JP_DE_S:1230 exx1231 push de1232 exx1233 ret12361238Fast_LDIR_Muliples_of_16:12391240.loop:1241 ldi 1242 ldi1243 ldi1244 ldi1245 ldi1246 ldi1247 ldi1248 ldi1249 ldi1250 ldi1251 ldi1252 ldi1253 ldi1254 ldi1255 ldi1256 ldi1257 jp pe, .loop System\Main.s1314 System/Constants.s134SCREEN_MAPPING_DESKTOP: equ 2555SCREEN_MAPPING_TASKBAR: equ 2546 7SCREEN_MAPPING_WINDOWS: equ 0000 0000 b8SCREEN_MAPPING_WINDOWS_TITLE_BAR: equ 0001 0000 b9SCREEN_MAPPING_WINDOWS_MINIMIZE_BUTTON: equ 0010 0000 b10SCREEN_MAPPING_WINDOWS_MAXIMIZE_RESTORE_BUTTON: equ 0011 0000 b11SCREEN_MAPPING_WINDOWS_CLOSE_BUTTON: equ 0100 0000 b12SCREEN_MAPPING_WINDOWS_RESIZE_CORNER: equ 0101 0000 b15WINDOW_STATE:16.MINIMIZED: equ 117.RESTORED: equ 218.MAXIZED: equ 321MOUSE_ON_JOYPORT_1: equ 0x131022MOUSE_ON_JOYPORT_2: equ 0x6C2024MOUSE_PORT: equ MOUSE_ON_JOYPORT_1System\Main.s15 System/Interrupt.s1_INIT_INTERRUPT:3 4 xor a5 ld (os.interruptBusy), a7 ld hl, .storeOldInterruptHook_init8 ld de, os.storeOldInterruptHook9 ld bc, 610 ldir12 ld hl, BIOS_H_TIMI13 ld de, os.storeOldInterruptHook14 ld bc, 515 ldir17 ld hl, INTERRUPT18 ld de, BIOS_H_TIMI19 ld bc, 320 ldir22 ret26.storeOldInterruptHook_init:27 db 0, 0, 0, 0, 028 db 0xc9 30INTERRUPT:31 32 jp HANDLER33 34HANDLER:35 36 ld a, (os.interruptBusy)37 and a38 ret nz39 ld a, 25540 ld (os.interruptBusy), a42 43 call _UPDATE_SYSTEM_TIME44 45 46 ld hl, (OS.ticksSinceLastInput)47 inc hl48 ld (OS.ticksSinceLastInput), hl50 55 58 ld de, MOUSE_PORT59 call GTMOUS60 61 ld a, h62 cp 25563 jp nz, .skip64 cp l65 call z, .noMouse67.skip:69 70 ld a, ixh71 ld (OS.mouseButton_1), a72 ld a, ixl73 ld (OS.mouseButton_2), a76 80 81 ld a, h82 neg83 ld h, a85 86 ld a, l87 neg88 ld l, a90 92 xor a93 or ixh 94 or ixl 95 or h 96 or l 97 jp z, .skip_198 ld de, 099 ld (OS.ticksSinceLastInput), de100.skip_1:101 102 ld e, h 103 ld d, l 104 ld a, (os.mouseX)105 ld l, a 106 ld a, (os.mouseY)107 ld h, a 108 call CLIPADD109 110 ld a, l111 ld (os.mouseX), a112 ld (os.mouseX_1), a113 ld a, h114 ld (os.mouseY), a115 ld (OS.mouseY_1), a117 xor a118 ld (os.interruptBusy), a120 jp os.storeOldInterruptHook122123.noMouse:124 125 ret127132 133System\Main.s16 System/Init/Init.s1 System/Init/InitVdp.s12NAMTBL: equ 0x1800 3PATTBL: equ 0x0000 4COLTBL: equ 0x2000 5SPRPAT: equ 0x3800 6SPRATR: equ 0x1b00 9_INIT_VDP:12 13 ld a, 15 14 ld (BIOS_FORCLR), a 15 ld a, 1 16 ld (BIOS_BAKCLR), a 17 ld a, 4 18 ld (BIOS_BDRCLR), a 19 call BIOS_CHGCLR 21 22 ld a, 223 call BIOS_CHGMOD25 call SetSprites16x1627 call BIOS_DISSCR29 30 32 33 xor a 34 ld bc, 1024 * 16 35 ld hl, 0x0000 36 call BIOS_FILVRM38 39 ld hl, TILE_PATTERNS 40 ld de, PATTBL 41 ld bc, TILE_PATTERNS.size 42 call BIOS_LDIRVM 44 ld hl, TILE_PATTERNS 45 ld de, PATTBL + (256 * 8) 46 ld bc, TILE_PATTERNS.size 47 call BIOS_LDIRVM 49 ld hl, TILE_PATTERNS 50 ld de, PATTBL + (512 * 8) 51 ld bc, TILE_PATTERNS.size 52 call BIOS_LDIRVM 54 55 ld a, 0x1f 56 ld bc, 256 * 8 * 3 57 ld hl, COLTBL 58 call BIOS_FILVRM60 61 ld a, 0xf1 62 ld bc, TILE_FONT_REVERSED_PATTERNS.size 63 ld hl, COLTBL + (TILE_FONT_REVERSED_PATTERNS - TILE_PATTERNS) 64 call BIOS_FILVRM65 66 ld a, 0xf1 67 ld bc, TILE_FONT_REVERSED_PATTERNS.size 68 ld hl, COLTBL + (256 * 8) + (TILE_FONT_REVERSED_PATTERNS - TILE_PATTERNS) 69 call BIOS_FILVRM70 71 ld a, 0xf1 72 ld bc, TILE_FONT_REVERSED_PATTERNS.size 73 ld hl, COLTBL + (512 * 8) + (TILE_FONT_REVERSED_PATTERNS - TILE_PATTERNS) 74 call BIOS_FILVRM76 82 84 ld hl, NAMTBL_TEST 85 ld de, NAMTBL 86 ld bc, NAMTBL_TEST.size 87 call BIOS_LDIRVM 89 ld hl, NAMTBL_TEST 90 ld de, NAMTBL + 256 91 ld bc, NAMTBL_TEST.size 92 call BIOS_LDIRVM 94 ld hl, NAMTBL_TEST 95 ld de, NAMTBL + 512 96 ld bc, NAMTBL_TEST.size 97 call BIOS_LDIRVM 99 100 ld hl, SPRITE_PATTERNS 101 ld de, SPRPAT 102 ld bc, SPRITE_PATTERNS.size 103 call BIOS_LDIRVM 105 111 call BIOS_ENASCR113 ret115122123NAMTBL_TEST:124 db TILE_EMPTY125 db TILE_EMPTY126 db TILE_WINDOW_TITLE_TOP_LEFT127 db TILE_WINDOW_TITLE_MIDDLE_TOP128 db TILE_WINDOW_TITLE_MIDDLE_TOP129 db TILE_WINDOW_TITLE_MIDDLE_TOP130 db TILE_WINDOW_TITLE_MIDDLE_TOP131 db TILE_WINDOW_TOP_RIGHT_CORNER_TOP132 db 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0134 db TILE_EMPTY135 db TILE_EMPTY136 db TILE_WINDOW_TITLE_BOTTOM_LEFT137 db TILE_WINDOW_TITLE_MIDDLE_BOTTOM138 db TILE_WINDOW_MINIMIZE_BUTTON139 db TILE_WINDOW_MAXIMIZE_BUTTON140 db TILE_WINDOW_CLOSE_BUTTON141 db TILE_WINDOW_TOP_RIGHT_CORNER_BOTTOM142 db 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0144 db TILE_EMPTY145 db TILE_EMPTY146 db TILE_WINDOW_BORDER_LEFT147 db TILE_FONT_LOWERCASE_A + 0148 db TILE_FONT_LOWERCASE_A + 25149 db TILE_FONT_NUMBERS_0 + 0150 db TILE_FONT_NUMBERS_0 + 9151 db TILE_WINDOW_BORDER_RIGHT152 db 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0154 db TILE_EMPTY155 db TILE_EMPTY156 db TILE_WINDOW_BORDER_LEFT157 db TILE_FONT_UPPERCASE_A + 0158 db TILE_FONT_UPPERCASE_A + 25159 db TILE_FONT_REVERSED_SYMBOLS + 0160 db TILE_EMPTY161 db TILE_WINDOW_BORDER_RIGHT162 db 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0164 db TILE_EMPTY165 db TILE_EMPTY166 db TILE_WINDOW_BORDER_LEFT167 169 db TILE_FONT_REVERSED_LOWERCASE_A + 0170 db TILE_FONT_REVERSED_LOWERCASE_A + 25171 db TILE_FONT_REVERSED_NUMBERS_0 + 0172 db TILE_FONT_REVERSED_NUMBERS_0 + 9173 db TILE_WINDOW_RESIZE_CORNER_TOP174 db 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0176 db TILE_EMPTY177 db TILE_EMPTY178 db TILE_WINDOW_BORDER_BOTTOM_LEFT179 db TILE_WINDOW_BORDER_MIDDLE_BOTTOM180 db TILE_WINDOW_BORDER_MIDDLE_BOTTOM181 db TILE_WINDOW_BORDER_MIDDLE_BOTTOM182 db TILE_WINDOW_RESIZE_CORNER_LEFT183 db TILE_WINDOW_RESIZE_CORNER_RIGHT184 db 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0186 db 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0188.size: equ $ - NAMTBL_TEST191196System/Init/Init.s2 System/Init/InitRam.s1_INIT_RAM:3 5 xor a6 ld (RamStart), a7 ld hl, RamStart8 ld de, RamStart + 19 ld bc, RamEnd - RamStart - 110 ldir12 13 ld a, 0xff14 ld (OS.processes), a15 ld hl, OS.processes16 ld de, OS.processes + 117 ld bc, OS.processes_size - 118 ldir19 20 21 ld hl, OS.processes22 ld (OS.nextAvailableProcessAddr), hl24 25 ld hl, 026 ld (OS.currentProcessAddr), hl28 29 ld a, 128 - 830 ld (OS.mouseY), a31 ld (OS.mouseY_1), a32 ld a, 96 - 833 ld (OS.mouseX), a34 ld (OS.mouseX_1), a35 ld a, SPRITE_INDEX_CURSOR_036 ld (OS.mousePattern), a37 ld a, SPRITE_INDEX_CURSOR_138 ld (OS.mousePattern_1), a39 ld a, 1 40 ld (OS.mouseColor), a41 ld a, 15 42 ld (OS.mouseColor_1), a44 46 ld hl, OS.screenMapping47 ld bc, 32 * 22 48.loop_1:49 ld a, SCREEN_MAPPING_DESKTOP 50 ld (hl), a51 52 inc hl53 54 dec bc55 ld a, c56 or b57 jp nz, .loop_160 ld a, SCREEN_MAPPING_TASKBAR 61 ld b, 32 * 2 62.loop_2:63 ld (hl), a64 inc hl65 djnz .loop_266 68 ret71System/Init/Init.s7_INIT:9 call _INIT_VDP11 call _INIT_RAM13 call _INIT_SYSTEM_TIME15 call _INIT_INTERRUPT17 19 call _DRAW_TASKBAR21 ret24System\Main.s17 System/Desktop/Desktop.s1_DRAW_TASKBAR:3102036 37 ld hl, TASKBAR 38 ld de, NAMTBL + (32 * 22) 39 ld bc, 64 40 call BIOS_LDIRVM 43 call _DRAW_TASKBAR_CLOCK46 ret5051_DRAW_TASKBAR_CLOCK:53 54 ld hl, NAMTBL + (32 * 23) + 26 55 call BIOS_SETWRT56 ld c, PORT_059 ld b, TILE_FONT_REVERSED_NUMBERS_061 62 ld a, (OS.currentTime_Hours)63 srl a 64 srl a 65 srl a 66 srl a 67 or a68 jp z, .skipTensOfHours 69 add b 70 jp .continue71.skipTensOfHours:72 ld a, TILE_EMPTY_BLACK73.continue:74 out (c), a76 77 ld a, (OS.currentTime_Hours)78 and 0000 1111 b79 add b 80 out (c), a82 83 nop84 nop85 ld a, TILE_FONT_REVERSED_SYMBOLS + 0 86 out (c), a88 89 ld a, (OS.currentTime_Minutes)90 srl a 91 srl a 92 srl a 93 srl a 94 add b 95 out (c), a96 97 98 ld a, (OS.currentTime_Minutes)99 and 0000 1111 b100 add b 101 out (c), a103 ret107TASKBAR:108 109 db TILE_TASKBAR_TOP, TILE_TASKBAR_TOP, TILE_TASKBAR_TOP, TILE_TASKBAR_TOP110 db TILE_TASKBAR_TOP, TILE_TASKBAR_TOP, TILE_TASKBAR_TOP, TILE_TASKBAR_TOP111 db TILE_TASKBAR_TOP, TILE_TASKBAR_TOP, TILE_TASKBAR_TOP, TILE_TASKBAR_TOP112 db TILE_TASKBAR_TOP, TILE_TASKBAR_TOP, TILE_TASKBAR_TOP, TILE_TASKBAR_TOP113 db TILE_TASKBAR_TOP, TILE_TASKBAR_TOP, TILE_TASKBAR_TOP, TILE_TASKBAR_TOP114 db TILE_TASKBAR_TOP, TILE_TASKBAR_TOP, TILE_TASKBAR_TOP, TILE_TASKBAR_TOP115 db TILE_TASKBAR_TOP, TILE_TASKBAR_TOP, TILE_TASKBAR_TOP, TILE_TASKBAR_TOP116 db TILE_TASKBAR_TOP, TILE_TASKBAR_TOP, TILE_TASKBAR_TOP, TILE_TASKBAR_TOP118 119 db TILE_EMPTY_BLACK, TILE_HOME_ICON, TILE_EMPTY_BLACK120 121 db TILE_SHOW_DESKTOP_ICON, TILE_EMPTY_BLACK123 127 db TILE_FONT_REVERSED_LOWERCASE_A + 13 128 db TILE_FONT_REVERSED_LOWERCASE_A + 14 129 db TILE_FONT_REVERSED_LOWERCASE_A + 19 130 db TILE_FONT_REVERSED_LOWERCASE_A + 4 131 db TILE_FONT_REVERSED_LOWERCASE_A + 15 132 db TILE_FONT_REVERSED_LOWERCASE_A + 0 133 db TILE_FONT_REVERSED_LOWERCASE_A + 3 134 135 db TILE_EMPTY_BLACK136 137 138 db TILE_FONT_LOWERCASE_A + 2 139 db TILE_FONT_LOWERCASE_A + 0 140 db TILE_FONT_LOWERCASE_A + 11 141 db TILE_FONT_LOWERCASE_A + 2 142 143 db TILE_EMPTY_BLACK, TILE_EMPTY_BLACK, TILE_EMPTY_BLACK144 db TILE_EMPTY_BLACK, TILE_EMPTY_BLACK, TILE_EMPTY_BLACK, TILE_EMPTY_BLACK145 146 db TILE_EMPTY_BLACK, TILE_EMPTY_BLACK147 148 152 db TILE_EMPTY_BLACK, TILE_EMPTY_BLACK, TILE_EMPTY_BLACK, TILE_EMPTY_BLACK, TILE_EMPTY_BLACK153 154 db TILE_EMPTY_BLACK155System\Main.s18 System/Window/Window.s13_DRAW_WINDOW:4 5 6 9 ld l, (ix + PROCESS_STRUCT_IX.x) 10 ld h, (ix + PROCESS_STRUCT_IX.y) 11 12 16 call _CONVERT_COL_LINE_TO_LINEAR17 18 19 push hl20 ex de, hl21 ld hl, OS.screenMapping22 add hl, de23 24 ld de, 32 26 27 push hl28 ld c, (ix + PROCESS_STRUCT_IX.height) 29 .outerLoop_1:30 push hl31 ld b, (ix + PROCESS_STRUCT_IX.width) 32 .loop_20:33 34 35 ld a, (ix + PROCESS_STRUCT_IX.processId)36 or SCREEN_MAPPING_WINDOWS37 38 ld (hl), a39 inc hl40 djnz .loop_2041 pop hl43 add hl, de44 dec c45 jp nz, .outerLoop_146 pop hl48 49 ld a, (ix + PROCESS_STRUCT_IX.processId)50 or SCREEN_MAPPING_WINDOWS_TITLE_BAR51 ld c, a53 54 push hl55 ld b, (ix + PROCESS_STRUCT_IX.width) 56 .loop_21:57 ld (hl), c58 inc hl59 djnz .loop_2160 pop hl61 62 add hl, de 63 push hl64 ld a, (ix + PROCESS_STRUCT_IX.width) 65 sub 4 66 ld b, a67 .loop_22:68 ld (hl), c69 inc hl70 djnz .loop_2272 ld a, (ix + PROCESS_STRUCT_IX.processId)73 or SCREEN_MAPPING_WINDOWS_MINIMIZE_BUTTON74 ld (hl), a75 inc hl77 ld a, (ix + PROCESS_STRUCT_IX.processId)78 or SCREEN_MAPPING_WINDOWS_MAXIMIZE_RESTORE_BUTTON79 ld (hl), a80 inc hl82 ld a, (ix + PROCESS_STRUCT_IX.processId)83 or SCREEN_MAPPING_WINDOWS_CLOSE_BUTTON84 ld (hl), a85 inc hl87 pop hl89 pop hl91 92 ld bc, NAMTBL93 add hl, bc96 100 101 105 107 push hl108 call BIOS_SETWRT109 110 ld a, TILE_WINDOW_TITLE_TOP_LEFT111 out (PORT_0), a113 ld a, (ix + PROCESS_STRUCT_IX.width) 114 sub 2 115 ld b, a116 .loop_1: 117 ld a, TILE_WINDOW_TITLE_MIDDLE_TOP118 out (PORT_0), a119 djnz .loop_1121 nop122 nop123 ld a, TILE_WINDOW_TOP_RIGHT_CORNER_TOP124 out (PORT_0), a125 pop hl126 127 128 ld de, 32129 add hl, de130 131 push hl132 call BIOS_SETWRT133 ld a, TILE_WINDOW_TITLE_BOTTOM_LEFT134 out (PORT_0), a135 136 ld a, (ix + PROCESS_STRUCT_IX.width) 137 sub 5 138 ld b, a139 .loop_2:140 ld a, TILE_WINDOW_TITLE_MIDDLE_BOTTOM141 out (PORT_0), a142 djnz .loop_2144 nop145 nop146 ld a, TILE_WINDOW_MINIMIZE_BUTTON147 out (PORT_0), a149 nop150 nop151 ld a, TILE_WINDOW_MAXIMIZE_BUTTON152 out (PORT_0), a154 nop155 nop156 ld a, TILE_WINDOW_CLOSE_BUTTON157 out (PORT_0), a159 nop160 nop161 ld a, TILE_WINDOW_TOP_RIGHT_CORNER_BOTTOM162 out (PORT_0), a163 pop hl165 166 push hl, ix167 inc hl168 call BIOS_SETWRT169 170 ld b, 16 171 .loop_10:172 ld a, (ix + PROCESS_STRUCT_IX.windowTitle) 173 or a 174 jp z, .endLoop_10175 out (PORT_0), a176 inc ix177 djnz .loop_10178 .endLoop_10:179 pop ix, hl181 183 ld a, (ix + PROCESS_STRUCT_IX.height) 184 sub 4 185 ld b, a186.loop_height:187 push bc189 ld de, 32190 add hl, de191 192 push hl193 call BIOS_SETWRT194 ld a, TILE_WINDOW_BORDER_LEFT195 out (PORT_0), a197 ld a, (ix + PROCESS_STRUCT_IX.width) 198 sub 2 199 ld b, a200 .loop_3:201 ld a, TILE_EMPTY202 out (PORT_0), a203 djnz .loop_3205 nop206 nop207 ld a, TILE_WINDOW_BORDER_RIGHT208 out (PORT_0), a209 pop hl211 pop bc212 djnz .loop_height214 216 217 ld de, 32218 add hl, de219 220 push hl221 call BIOS_SETWRT222 ld a, TILE_WINDOW_BORDER_LEFT223 out (PORT_0), a224 225 ld a, (ix + PROCESS_STRUCT_IX.width) 226 sub 2 227 ld b, a228 .loop_4:229 ld a, TILE_EMPTY230 out (PORT_0), a231 djnz .loop_4233 nop234 nop235 ld a, TILE_WINDOW_RESIZE_CORNER_TOP236 out (PORT_0), a237 pop hl239 240 ld de, 32241 add hl, de242 243 push hl244 call BIOS_SETWRT245 ld a, TILE_WINDOW_BORDER_BOTTOM_LEFT246 out (PORT_0), a247 248 ld a, (ix + PROCESS_STRUCT_IX.width) 249 sub 3 250 ld b, a251 .loop_5:252 ld a, TILE_WINDOW_BORDER_MIDDLE_BOTTOM253 out (PORT_0), a254 djnz .loop_5256 nop257 nop258 ld a, TILE_WINDOW_RESIZE_CORNER_LEFT259 out (PORT_0), a261 nop262 nop263 ld a, TILE_WINDOW_RESIZE_CORNER_RIGHT264 out (PORT_0), a265 pop hl267 271 ret275281_CONVERT_COL_LINE_TO_LINEAR:282 283 294 xor a 296 srl h 297 rra 298 srl h299 rra300 srl h301 rra303 or l 304 ld l, a306 ret307System\Main.s19 System/Keyboard/Keyboard.s1 System\Main.s20 System/Mouse/Mouse.s1 System/Mouse/DrawMouseCursor.s1_DRAW_MOUSE_CURSOR:3 5 6 ld hl, SPRATR7 call BIOS_SETWRT8 ld hl, OS.mouseSpriteAttributes9 ld c, PORT_010 ld b, 811.loop_1:12 outi13 jp nz, .loop_1 15 nop16 nop17 ld a, 20818 out (c), a 22 23 ld a, (OS.mouseX) 25 srl a 26 srl a 27 srl a 28 ld l, a30 ld a, (OS.mouseY) 32 srl a 33 srl a 34 srl a 35 ld h, a37 call _CONVERT_COL_LINE_TO_LINEAR39 ld bc, OS.screenMapping40 add hl, bc42 ld a, (hl)44 ld (OS.currentTileMouseOver), a46 53 ret5558System/Mouse/Mouse.s2 System/Mouse/MouseClick.s1_MOUSE_CLICK:3 ld a, (OS.mouseButton_1)4 or a5 ret z7 8 ld a, (OS.currentTileMouseOver)9 and 0000 1111 b 10 ld c, a14 ld a, (OS.currentTileMouseOver)15 and 1111 0000 b 17 cp SCREEN_MAPPING_WINDOWS_TITLE_BAR18 jp z, .click_WindowTitleBar20 cp SCREEN_MAPPING_WINDOWS_CLOSE_BUTTON21 jp z, .click_WindowCloseButton23 ret2527.click_WindowTitleBar:28 call _GET_PROCESS_BY_ID29 jp z, .processIdFound31 ret3335.processIdFound:36 call _SET_CURRENT_PROCESS37 ret3941.click_WindowCloseButton:42 call _GET_PROCESS_BY_ID43 call z, .processIdFound44 ret nz46 48 49 ld a, 0xff50 ld hl, (OS.currentProcessAddr)51 ld (hl), a52 53 push hl 54 pop de56 inc de58 60 ld bc, Process_struct.size - 162 ldir63 66 67 call _GET_NEXT_AVAILABLE_PROCESS_ADDR68 inc a 69 jp z, .maxProcessLimitReached70 ld (OS.nextAvailableProcessAddr), hl74 75 ld hl, 0x000076 ld (OS.currentProcessAddr), hl78 ret80.maxProcessLimitReached:81 call BIOS_BEEP 82 jp .maxProcessLimitReached 83 ret84System/Mouse/Mouse.s6WAIT1: equ 10 7WAIT2: equ 30 1017GTMOUS:18 ld b, WAIT2 19 call GTOFS2 21 22 ld ix, 023 bit 5, a24 jp nz, .mouseButton_1_NotClicked25 ld ixh, 126.mouseButton_1_NotClicked:27 bit 4, a28 jp nz, .mouseButton_2_NotClicked29 ld ixl, 130.mouseButton_2_NotClicked:32 and 0x0F33 rlca34 rlca35 rlca36 rlca37 ld c, a38 call GTOFST 39 and 0x0F40 or c41 ld h, a 42 call GTOFST 43 and 0x0F44 rlca45 rlca46 rlca47 rlca48 ld c, a49 call GTOFST 50 and 0x0F51 or c52 ld l, a 53 ret54 55GTOFST: 56 ld b, WAIT157GTOFS2: 58 ld a, 15 60 out (0xA0), a61 in a, (0xA1) 62 and 0x80 63 or d 64 out (0xA1), a65 xor e66 ld d, a67 68 call WAITMS 69 70 ld a, 1471 out (0xA0), a72 73 in a, (0xA2)74 ret75WAITMS:76 ld a, b77WTTR:78 djnz WTTR79 db 0xED,0x55 80 rlca81 rlca82 ld b, a83WTTR2:84 djnz WTTR285 ld b, a 86WTTR3:87 djnz WTTR389 ret 9199CLIPADD:100 101 ld a, l102 ld b, e103 call LIMITADD104 ld l, a105 106 ld a, h107 ld b, d108 call LIMITADD109 ld h, a110 cp 191111 ret c112 ld h, 191113 ret114 115LIMITADD:116 117121 122 123 sub 128 124 add a, b 125 jp pe, .CLIP 126 add a, 128 127 ret 128.CLIP: 129 ld a, b 130 cpl 131 add a, a 132 sbc a, a 133 ret 134System\Main.s21 System/Process/Process.s1MAX_PROCESS_ID: equ 3 46_LOAD_PROCESS:818 19 push hl21 ld a, 0xff22 ld hl, (OS.nextAvailableProcessAddr)23 ld (hl), a24 25 push hl 26 pop de28 inc de30 32 ld bc, Process_struct.size - 133 ldir34 pop hl36 38 ld de, (OS.nextAvailableProcessAddr) 39 ld bc, Process_struct.size_without_screenTilesBehind 40 ldir 42 43 ld hl, (OS.nextAvailableProcessAddr)44 ld (OS.currentProcessAddr), hl47 49 ld hl, (OS.nextAvailableProcessAddr)50 ld bc, Process_struct.size51 add hl, bc52 54 ld (OS.nextAvailableProcessAddr), hl59 61 62 65 66 70 74 78 81 82 ld hl, (OS.currentProcessAddr)83 call _GET_NEXT_AVAILABLE_PROCESS_ID84 ld a, ixh85 cp 25586 jp z, .maxProcessLimitReached87 ld hl, (OS.currentProcessAddr)88 ld (hl), a 90 94 ld ix, (OS.currentProcessAddr)95 call _DRAW_WINDOW97 99 ld ix, (OS.currentProcessAddr)100 ld e, (ix + PROCESS_STRUCT_IX.openAddr) 101 ld d, (ix + PROCESS_STRUCT_IX.openAddr + 1) 102 call JP_DE106 112 113 114 121 ret123.maxProcessLimitReached:124 125 ld hl, 0xffff126 ld (OS.nextAvailableProcessAddr), hl128 ret130.showAlertMaxProcessLimitReached:132 133 call BIOS_BEEP134 jp .showAlertMaxProcessLimitReached136 ret140143_GET_NEXT_AVAILABLE_PROCESS_ID:144 ld ixh, 0 146.outerLoop:147 ld hl, OS.processes149.loop:150 ld a, (hl)151 cp ixh152 jp z, .goToNext 154 ld bc, Process_struct.size155 add hl, bc 157 158 ld de, OS.processes_end159 call BIOS_DCOMPR 160 jp nz, .loop162 163 ret165.goToNext:166 inc ixh167 ld a, ixh168 cp MAX_PROCESS_ID + 1169 jp nz, .outerLoop171 172 ld ixh, 255174 ret177183_GET_NEXT_AVAILABLE_PROCESS_ADDR:185 ld hl, OS.processes186 ld de, Process_struct.size187 ld b, MAX_PROCESS_ID + 1188.loop:189 ld a, (hl)190 191 inc a 192 ret z194 add hl, de196 djnz .loop198 199 ld a, 255201 ret205207_SET_CURRENT_PROCESS:208 209 ld (OS.currentProcessAddr), hl211 216 218 ret222228_GET_PROCESS_BY_ID:229 230 ld hl, OS.processes231 ld de, Process_struct.size232 ld b, MAX_PROCESS_ID + 1233.loop_1:234 ld a, (hl)235 cp c236 ret z237 add hl, de238 djnz .loop_1240 241 ld hl, 0x0000243 retSystem\Main.s22 System/Time/Time.s1_INIT_SYSTEM_TIME:3 xor a5 ld (os.timeCounter), a7 8 ld a, 0x129 ld (OS.currentTime_Hours), a10 xor a11 ld (OS.currentTime_Minutes), a12 ld (OS.currentTime_Seconds), a13 ld (OS.timeCounter), a15 16 ld hl, OS.currentDate17 ld (hl), a18 inc hl19 ld (hl), a20 inc hl21 ld (hl), a23 ret27SYSTEM_HERTZ_RATE: equ 60 29_UPDATE_SYSTEM_TIME:31 ld a, (os.timeCounter)32 inc a33 ld (os.timeCounter), a34 cp SYSTEM_HERTZ_RATE35 ret nz37 38 xor a39 ld (os.timeCounter), a41 43 44 ld a, (OS.currentTime_Seconds)45 inc a 46 daa47 ld (OS.currentTime_Seconds), a49 50 cp 0x6051 ret nz52 ld a, (OS.currentTime_Minutes)53 inc a 54 daa55 ld (OS.currentTime_Minutes), a56 57 xor a58 ld (OS.currentTime_Seconds), a60 61 ld a, (OS.currentTime_Minutes)62 cp 0x6063 ret nz64 ld a, (OS.currentTime_Hours)65 inc a66 daa68 cp 0x13 69 jp nz, .not13Hours70 ld a, 0x0171.not13Hours:72 ld (OS.currentTime_Hours), a73 74 xor a75 ld (OS.currentTime_Minutes), a79 retSystem\Main.s2426 Graphics/Tiles.s1TILE_PATTERNS:35TILE_EMPTY: equ 06 DB 00000000b7 DB 00000000b8 DB 00000000b9 DB 00000000b10 DB 00000000b11 DB 00000000b12 DB 00000000b13 DB 00000000b15TILE_WINDOW_TITLE_TOP_LEFT: equ 116 DB 00000000b17 DB 00000000b18 DB 00000000b19 DB 00000000b20 DB 00000000b21 DB 00000000b22 DB 01111111b23 DB 01111111b25TILE_WINDOW_TITLE_BOTTOM_LEFT: equ 226 DB 01111111b27 DB 01111111b28 DB 01111111b29 DB 01111111b30 DB 01111111b31 DB 01111111b32 DB 01111111b33 DB 01111111b35TILE_WINDOW_TITLE_MIDDLE_TOP: equ 336 DB 00000000b37 DB 00000000b38 DB 00000000b39 DB 00000000b40 DB 00000000b41 DB 00000000b42 DB 11111111b43 DB 11111111b45TILE_EMPTY_BLACK: equ 446TILE_WINDOW_TITLE_MIDDLE_BOTTOM: equ 447 DB 11111111b48 DB 11111111b49 DB 11111111b50 DB 11111111b51 DB 11111111b52 DB 11111111b53 DB 11111111b54 DB 11111111b56TILE_WINDOW_BORDER_LEFT: equ 557 DB 01000000b58 DB 01000000b59 DB 01000000b60 DB 01000000b61 DB 01000000b62 DB 01000000b63 DB 01000000b64 DB 01000000b66TILE_WINDOW_BORDER_BOTTOM_LEFT: equ 667 DB 01000000b68 DB 01000000b69 DB 01000000b70 DB 01111111b71 DB 00001111b72 DB 00001111b73 DB 00001111b74 DB 00000000b76TILE_WINDOW_BORDER_MIDDLE_BOTTOM: equ 777 DB 00000000b78 DB 00000000b79 DB 00000000b80 DB 11111111b81 DB 11111111b82 DB 11111111b83 DB 11111111b84 DB 00000000b86TILE_WINDOW_RESIZE_CORNER_LEFT: equ 887 DB 00000001b88 DB 00000011b89 DB 00000110b90 DB 11111111b91 DB 11111111b92 DB 11111111b93 DB 11111111b94 DB 00000000b96TILE_WINDOW_RESIZE_CORNER_TOP: equ 997 DB 00011110b98 DB 00011110b99 DB 00011110b100 DB 00011110b101 DB 00011110b102 DB 00111110b103 DB 01111110b104 DB 11011110b106TILE_WINDOW_RESIZE_CORNER_RIGHT: equ 10107 DB 10111110b108 DB 01111110b109 DB 11011110b110 DB 11111110b111 DB 11111110b112 DB 11111110b113 DB 11111110b114 DB 00000000b118TILE_WINDOW_MINIMIZE_BUTTON: equ 11119 DB 11111111b120 DB 11111111b121 DB 11111111b122 DB 11111111b123 DB 11000001b124 DB 11000001b125 DB 11111111b126 DB 11111111b128TILE_WINDOW_MAXIMIZE_BUTTON: equ 12129 DB 11111111b130 DB 11000001b131 DB 11000001b132 DB 11011101b133 DB 11011101b134 DB 11000001b135 DB 11111111b136 DB 11111111b138TILE_WINDOW_CLOSE_BUTTON: equ 13139 DB 11111111b140 DB 11011101b141 DB 11101011b142 DB 11110111b143 DB 11101011b144 DB 11011101b145 DB 11111111b146 DB 11111111b147 148TILE_WINDOW_TOP_RIGHT_CORNER_TOP: equ 14149 DB 00000000b150 DB 00000000b151 DB 00000000b152 DB 00000000b153 DB 00000000b154 DB 00000000b155 DB 11110000b156 DB 11110000b158TILE_WINDOW_TOP_RIGHT_CORNER_BOTTOM: equ 15159 DB 11110000b160 DB 11111110b161 DB 11111110b162 DB 11111110b163 DB 11111110b164 DB 11111110b165 DB 11111110b166 DB 11111110b168TILE_WINDOW_BORDER_RIGHT: equ 16169 DB 00011110b170 DB 00011110b171 DB 00011110b172 DB 00011110b173 DB 00011110b174 DB 00011110b175 DB 00011110b176 DB 00011110b178188190TILE_TASKBAR_TOP: equ 17191 DB 00000000 b192 DB 00000000 b193 DB 00000000 b194 DB 00000000 b195 DB 00000000 b196 DB 00000000 b197 DB 11111111 b198 DB 11111111 b200TILE_HOME_ICON: equ 18201 DB 11100111 b202 DB 11011011 b203 DB 10111101 b204 DB 01100110 b205 DB 11000011 b206 DB 10000001 b207 DB 10011001 b208 DB 10011001 b210TILE_SHOW_DESKTOP_ICON: equ 19211 DB 10011001 b212 DB 10111101 b213 DB 11111111 b214 DB 11111111 b215 DB 11111111 b216 DB 10111101 b217 DB 10011001 b218 DB 11111111 b220222232242252262272282292302312322 358360BASE_INDEX_TILE_FONT: equ 20362TILE_FONT_REVERSED_PATTERNS:364366TILE_FONT_REVERSED_NUMBERS_PATTERNS:368TILE_FONT_REVERSED_NUMBERS_0: equ BASE_INDEX_TILE_FONT + 0370 371 db 00000000 b372 db 00111100 b373 db 01100110 b374 db 01101110 b375 db 01110110 b376 db 01100110 b377 db 00111100 b378 db 00000000 b379 380 db 00000000 b381 db 00011000 b382 db 00111000 b383 db 00011000 b384 db 00011000 b385 db 00011000 b386 db 01111110 b387 db 00000000 b388 389 db 00000000 b390 db 00111100 b391 db 01100110 b392 db 00001100 b393 db 00011000 b394 db 00110000 b395 db 01111110 b396 db 00000000 b397 398 db 00000000 b399 db 01111110 b400 db 00001100 b401 db 00011000 b402 db 00001100 b403 db 01100110 b404 db 00111100 b405 db 00000000 b406 407 db 00000000 b408 db 00001100 b409 db 00011100 b410 db 00111100 b411 db 01101100 b412 db 01111110 b413 db 00001100 b414 db 00000000 b415 416 db 00000000 b417 db 01111110 b418 db 01100000 b419 db 01111100 b420 db 00000110 b421 db 01100110 b422 db 00111100 b423 db 00000000 b424 425 db 00000000 b426 db 00111100 b427 db 01100000 b428 db 01111100 b429 db 01100110 b430 db 01100110 b431 db 00111100 b432 db 00000000 b433 434 db 00000000 b435 db 01111110 b436 db 00000110 b437 db 00001100 b438 db 00011000 b439 db 00110000 b440 db 00110000 b441 db 00000000 b442 443 db 00000000 b444 db 00111100 b445 db 01100110 b446 db 00111100 b447 db 01100110 b448 db 01100110 b449 db 00111100 b450 db 00000000 b451 452 db 00000000 b453 db 00111100 b454 db 01100110 b455 db 00111110 b456 db 00000110 b457 db 00001100 b458 db 00111000 b459 db 00000000 b462465TILE_FONT_REVERSED_LOWERCASE_PATTERNS:467TILE_FONT_REVERSED_LOWERCASE_A: equ TILE_FONT_REVERSED_NUMBERS_0 + 10469 470 db 00000000 b471 db 00000000 b472 db 00111100 b473 db 00000110 b474 db 00111110 b475 db 01100110 b476 db 00111110 b477 db 00000000 b478 479 db 00000000 b480 db 01100000 b481 db 01100000 b482 db 01111100 b483 db 01100110 b484 db 01100110 b485 db 01111100 b486 db 00000000 b487 488 db 00000000 b489 db 00000000 b490 db 00111100 b491 db 01100000 b492 db 01100000 b493 db 01100000 b494 db 00111100 b495 db 00000000 b496 497 db 00000000 b498 db 00000110 b499 db 00000110 b500 db 00111110 b501 db 01100110 b502 db 01100110 b503 db 00111110 b504 db 00000000 b505 506 db 00000000 b507 db 00000000 b508 db 00111100 b509 db 01100110 b510 db 01111110 b511 db 01100000 b512 db 00111100 b513 db 00000000 b514 515 db 00000000 b516 db 00001110 b517 db 00011000 b518 db 00111110 b519 db 00011000 b520 db 00011000 b521 db 00011000 b522 db 00000000 b523 524 db 00000000 b525 db 00000000 b526 db 00111110 b527 db 01100110 b528 db 01100110 b529 db 00111110 b530 db 00000110 b531 db 01111100 b532 533 db 00000000 b534 db 01100000 b535 db 01100000 b536 db 01111100 b537 db 01100110 b538 db 01100110 b539 db 01100110 b540 db 00000000 b541 542 db 00000000 b543 db 00011000 b544 db 00000000 b545 db 00111000 b546 db 00011000 b547 db 00011000 b548 db 00111100 b549 db 00000000 b550 551 db 00000000 b552 db 00000110 b553 db 00000000 b554 db 00000110 b555 db 00000110 b556 db 00000110 b557 db 00000110 b558 db 00111100 b559 560 db 00000000 b561 db 01100000 b562 db 01100000 b563 db 01101100 b564 db 01111000 b565 db 01101100 b566 db 01100110 b567 db 00000000 b568 569 db 00000000 b570 db 00111000 b571 db 00011000 b572 db 00011000 b573 db 00011000 b574 db 00011000 b575 db 00111100 b576 db 00000000 b577 578 db 00000000 b579 db 00000000 b580 db 01100110 b581 db 01111111 b582 db 01111111 b583 db 01101011 b584 db 01100011 b585 db 00000000 b586 587 db 00000000 b588 db 00000000 b589 db 01111100 b590 db 01100110 b591 db 01100110 b592 db 01100110 b593 db 01100110 b594 db 00000000 b595 596 db 00000000 b597 db 00000000 b598 db 00111100 b599 db 01100110 b600 db 01100110 b601 db 01100110 b602 db 00111100 b603 db 00000000 b604 605 db 00000000 b606 db 00000000 b607 db 01111100 b608 db 01100110 b609 db 01100110 b610 db 01111100 b611 db 01100000 b612 db 01100000 b613 614 db 00000000 b615 db 00000000 b616 db 00111110 b617 db 01100110 b618 db 01100110 b619 db 00111110 b620 db 00000110 b621 db 00000110 b622 623 db 00000000 b624 db 00000000 b625 db 01111100 b626 db 01100110 b627 db 01100000 b628 db 01100000 b629 db 01100000 b630 db 00000000 b631 632 db 00000000 b633 db 00000000 b634 db 00111110 b635 db 01100000 b636 db 00111100 b637 db 00000110 b638 db 01111100 b639 db 00000000 b640 641 db 00000000 b642 db 00011000 b643 db 01111110 b644 db 00011000 b645 db 00011000 b646 db 00011000 b647 db 00001110 b648 db 00000000 b649 650 db 00000000 b651 db 00000000 b652 db 01100110 b653 db 01100110 b654 db 01100110 b655 db 01100110 b656 db 00111110 b657 db 00000000 b658 659 db 00000000 b660 db 00000000 b661 db 01100110 b662 db 01100110 b663 db 01100110 b664 db 00111100 b665 db 00011000 b666 db 00000000 b667 668 db 00000000 b669 db 00000000 b670 db 01100011 b671 db 01101011 b672 db 01111111 b673 db 00111110 b674 db 00110110 b675 db 00000000 b676 677 db 00000000 b678 db 00000000 b679 db 01100110 b680 db 00111100 b681 db 00011000 b682 db 00111100 b683 db 01100110 b684 db 00000000 b685 686 db 00000000 b687 db 00000000 b688 db 01100110 b689 db 01100110 b690 db 01100110 b691 db 00111110 b692 db 00001100 b693 db 01111000 b694 695 db 00000000 b696 db 00000000 b697 db 01111110 b698 db 00001100 b699 db 00011000 b700 db 00110000 b701 db 01111110 b702 db 00000000 b704TILE_FONT_REVERSED_LOWERCASE_PATTERNS.size: equ $ - TILE_FONT_REVERSED_LOWERCASE_PATTERNS707709TILE_FONT_REVERSED_SYMBOLS_PATTERNS:711TILE_FONT_REVERSED_SYMBOLS: equ TILE_FONT_REVERSED_LOWERCASE_A + 26713 714 db 00000000 b715 db 00000000 b716 db 00011000 b717 db 00011000 b718 db 00000000 b719 db 00011000 b720 db 00011000 b721 db 00000000 b723726TILE_FONT_REVERSED_PATTERNS.SIZE: equ $ - TILE_FONT_REVERSED_PATTERNS729731733TILE_FONT_NUMBERS_PATTERNS:735TILE_FONT_NUMBERS_0: equ TILE_FONT_REVERSED_SYMBOLS + 1737 738 db 00000000 b739 db 00111100 b740 db 01100110 b741 db 01101110 b742 db 01110110 b743 db 01100110 b744 db 00111100 b745 db 00000000 b746 747 db 00000000 b748 db 00011000 b749 db 00111000 b750 db 00011000 b751 db 00011000 b752 db 00011000 b753 db 01111110 b754 db 00000000 b755 756 db 00000000 b757 db 00111100 b758 db 01100110 b759 db 00001100 b760 db 00011000 b761 db 00110000 b762 db 01111110 b763 db 00000000 b764 765 db 00000000 b766 db 01111110 b767 db 00001100 b768 db 00011000 b769 db 00001100 b770 db 01100110 b771 db 00111100 b772 db 00000000 b773 774 db 00000000 b775 db 00001100 b776 db 00011100 b777 db 00111100 b778 db 01101100 b779 db 01111110 b780 db 00001100 b781 db 00000000 b782 783 db 00000000 b784 db 01111110 b785 db 01100000 b786 db 01111100 b787 db 00000110 b788 db 01100110 b789 db 00111100 b790 db 00000000 b791 792 db 00000000 b793 db 00111100 b794 db 01100000 b795 db 01111100 b796 db 01100110 b797 db 01100110 b798 db 00111100 b799 db 00000000 b800 801 db 00000000 b802 db 01111110 b803 db 00000110 b804 db 00001100 b805 db 00011000 b806 db 00110000 b807 db 00110000 b808 db 00000000 b809 810 db 00000000 b811 db 00111100 b812 db 01100110 b813 db 00111100 b814 db 01100110 b815 db 01100110 b816 db 00111100 b817 db 00000000 b818 819 db 00000000 b820 db 00111100 b821 db 01100110 b822 db 00111110 b823 db 00000110 b824 db 00001100 b825 db 00111000 b826 db 00000000 b830833TILE_FONT_LOWERCASE_PATTERNS:835TILE_FONT_LOWERCASE_A: equ TILE_FONT_NUMBERS_0 + 10837 838 db 00000000 b839 db 00000000 b840 db 00111100 b841 db 00000110 b842 db 00111110 b843 db 01100110 b844 db 00111110 b845 db 00000000 b846 847 db 00000000 b848 db 01100000 b849 db 01100000 b850 db 01111100 b851 db 01100110 b852 db 01100110 b853 db 01111100 b854 db 00000000 b855 856 db 00000000 b857 db 00000000 b858 db 00111100 b859 db 01100000 b860 db 01100000 b861 db 01100000 b862 db 00111100 b863 db 00000000 b864 865 db 00000000 b866 db 00000110 b867 db 00000110 b868 db 00111110 b869 db 01100110 b870 db 01100110 b871 db 00111110 b872 db 00000000 b873 874 db 00000000 b875 db 00000000 b876 db 00111100 b877 db 01100110 b878 db 01111110 b879 db 01100000 b880 db 00111100 b881 db 00000000 b882 883 db 00000000 b884 db 00001110 b885 db 00011000 b886 db 00111110 b887 db 00011000 b888 db 00011000 b889 db 00011000 b890 db 00000000 b891 892 db 00000000 b893 db 00000000 b894 db 00111110 b895 db 01100110 b896 db 01100110 b897 db 00111110 b898 db 00000110 b899 db 01111100 b900 901 db 00000000 b902 db 01100000 b903 db 01100000 b904 db 01111100 b905 db 01100110 b906 db 01100110 b907 db 01100110 b908 db 00000000 b909 910 db 00000000 b911 db 00011000 b912 db 00000000 b913 db 00111000 b914 db 00011000 b915 db 00011000 b916 db 00111100 b917 db 00000000 b918 919 db 00000000 b920 db 00000110 b921 db 00000000 b922 db 00000110 b923 db 00000110 b924 db 00000110 b925 db 00000110 b926 db 00111100 b927 928 db 00000000 b929 db 01100000 b930 db 01100000 b931 db 01101100 b932 db 01111000 b933 db 01101100 b934 db 01100110 b935 db 00000000 b936 937 db 00000000 b938 db 00111000 b939 db 00011000 b940 db 00011000 b941 db 00011000 b942 db 00011000 b943 db 00111100 b944 db 00000000 b945 946 db 00000000 b947 db 00000000 b948 db 01100110 b949 db 01111111 b950 db 01111111 b951 db 01101011 b952 db 01100011 b953 db 00000000 b954 955 db 00000000 b956 db 00000000 b957 db 01111100 b958 db 01100110 b959 db 01100110 b960 db 01100110 b961 db 01100110 b962 db 00000000 b963 964 db 00000000 b965 db 00000000 b966 db 00111100 b967 db 01100110 b968 db 01100110 b969 db 01100110 b970 db 00111100 b971 db 00000000 b972 973 db 00000000 b974 db 00000000 b975 db 01111100 b976 db 01100110 b977 db 01100110 b978 db 01111100 b979 db 01100000 b980 db 01100000 b981 982 db 00000000 b983 db 00000000 b984 db 00111110 b985 db 01100110 b986 db 01100110 b987 db 00111110 b988 db 00000110 b989 db 00000110 b990 991 db 00000000 b992 db 00000000 b993 db 01111100 b994 db 01100110 b995 db 01100000 b996 db 01100000 b997 db 01100000 b998 db 00000000 b999 1000 db 00000000 b1001 db 00000000 b1002 db 00111110 b1003 db 01100000 b1004 db 00111100 b1005 db 00000110 b1006 db 01111100 b1007 db 00000000 b1008 1009 db 00000000 b1010 db 00011000 b1011 db 01111110 b1012 db 00011000 b1013 db 00011000 b1014 db 00011000 b1015 db 00001110 b1016 db 00000000 b1017 1018 db 00000000 b1019 db 00000000 b1020 db 01100110 b1021 db 01100110 b1022 db 01100110 b1023 db 01100110 b1024 db 00111110 b1025 db 00000000 b1026 1027 db 00000000 b1028 db 00000000 b1029 db 01100110 b1030 db 01100110 b1031 db 01100110 b1032 db 00111100 b1033 db 00011000 b1034 db 00000000 b1035 1036 db 00000000 b1037 db 00000000 b1038 db 01100011 b1039 db 01101011 b1040 db 01111111 b1041 db 00111110 b1042 db 00110110 b1043 db 00000000 b1044 1045 db 00000000 b1046 db 00000000 b1047 db 01100110 b1048 db 00111100 b1049 db 00011000 b1050 db 00111100 b1051 db 01100110 b1052 db 00000000 b1053 1054 db 00000000 b1055 db 00000000 b1056 db 01100110 b1057 db 01100110 b1058 db 01100110 b1059 db 00111110 b1060 db 00001100 b1061 db 01111000 b1062 1063 db 00000000 b1064 db 00000000 b1065 db 01111110 b1066 db 00001100 b1067 db 00011000 b1068 db 00110000 b1069 db 01111110 b1070 db 00000000 b107210741076TILE_FONT_UPPERCASE_PATTERNS:1078TILE_FONT_UPPERCASE_A: equ TILE_FONT_LOWERCASE_A + 261080 1081 db 00000000 b1082 db 00011000 b1083 db 00111100 b1084 db 01100110 b1085 db 01100110 b1086 db 01111110 b1087 db 01100110 b1088 db 00000000 b1089 1090 db 00000000 b1091 db 01111100 b1092 db 01100110 b1093 db 01111100 b1094 db 01100110 b1095 db 01100110 b1096 db 01111100 b1097 db 00000000 b1098 1099 db 00000000 b1100 db 00111100 b1101 db 01100110 b1102 db 01100000 b1103 db 01100000 b1104 db 01100110 b1105 db 00111100 b1106 db 00000000 b1107 1108 db 00000000 b1109 db 01111000 b1110 db 01101100 b1111 db 01100110 b1112 db 01100110 b1113 db 01101100 b1114 db 01111000 b1115 db 00000000 b1116 1117 db 00000000 b1118 db 01111110 b1119 db 01100000 b1120 db 01111100 b1121 db 01100000 b1122 db 01100000 b1123 db 01111110 b1124 db 00000000 b1125 1126 db 00000000 b1127 db 01111110 b1128 db 01100000 b1129 db 01111100 b1130 db 01100000 b1131 db 01100000 b1132 db 01100000 b1133 db 00000000 b1134 1135 db 00000000 b1136 db 00111110 b1137 db 01100000 b1138 db 01100000 b1139 db 01101110 b1140 db 01100110 b1141 db 00111110 b1142 db 00000000 b1143 1144 db 00000000 b1145 db 01100110 b1146 db 01100110 b1147 db 01111110 b1148 db 01100110 b1149 db 01100110 b1150 db 01100110 b1151 db 00000000 b1152 1153 db 00000000 b1154 db 01111110 b1155 db 00011000 b1156 db 00011000 b1157 db 00011000 b1158 db 00011000 b1159 db 01111110 b1160 db 00000000 b1161 1162 db 00000000 b1163 db 00000110 b1164 db 00000110 b1165 db 00000110 b1166 db 00000110 b1167 db 01100110 b1168 db 00111100 b1169 db 00000000 b1170 1171 db 00000000 b1172 db 01100110 b1173 db 01101100 b1174 db 01111000 b1175 db 01111000 b1176 db 01101100 b1177 db 01100110 b1178 db 00000000 b1179 1180 db 00000000 b1181 db 01100000 b1182 db 01100000 b1183 db 01100000 b1184 db 01100000 b1185 db 01100000 b1186 db 01111110 b1187 db 00000000 b1188 1189 db 00000000 b1190 db 01100011 b1191 db 01110111 b1192 db 01111111 b1193 db 01101011 b1194 db 01100011 b1195 db 01100011 b1196 db 00000000 b1197 1198 db 00000000 b1199 db 01100110 b1200 db 01110110 b1201 db 01111110 b1202 db 01111110 b1203 db 01101110 b1204 db 01100110 b1205 db 00000000 b1206 1207 db 00000000 b1208 db 00111100 b1209 db 01100110 b1210 db 01100110 b1211 db 01100110 b1212 db 01100110 b1213 db 00111100 b1214 db 00000000 b1215 1216 db 00000000 b1217 db 01111100 b1218 db 01100110 b1219 db 01100110 b1220 db 01111100 b1221 db 01100000 b1222 db 01100000 b1223 db 00000000 b1224 1225 db 00000000 b1226 db 00111100 b1227 db 01100110 b1228 db 01100110 b1229 db 01100110 b1230 db 01101100 b1231 db 00110110 b1232 db 00000000 b1233 1234 db 00000000 b1235 db 01111100 b1236 db 01100110 b1237 db 01100110 b1238 db 01111100 b1239 db 01101100 b1240 db 01100110 b1241 db 00000000 b1242 1243 db 00000000 b1244 db 00111100 b1245 db 01100000 b1246 db 00111100 b1247 db 00000110 b1248 db 00000110 b1249 db 00111100 b1250 db 00000000 b1251 1252 db 00000000 b1253 db 01111110 b1254 db 00011000 b1255 db 00011000 b1256 db 00011000 b1257 db 00011000 b1258 db 00011000 b1259 db 00000000 b1260 1261 db 00000000 b1262 db 01100110 b1263 db 01100110 b1264 db 01100110 b1265 db 01100110 b1266 db 01100110 b1267 db 01111110 b1268 db 00000000 b1269 1270 db 00000000 b1271 db 01100110 b1272 db 01100110 b1273 db 01100110 b1274 db 01100110 b1275 db 00111100 b1276 db 00011000 b1277 db 00000000 b1278 1279 db 00000000 b1280 db 01100011 b1281 db 01100011 b1282 db 01101011 b1283 db 01111111 b1284 db 01110111 b1285 db 01100011 b1286 db 00000000 b1287 1288 db 00000000 b1289 db 01100110 b1290 db 01100110 b1291 db 00111100 b1292 db 00111100 b1293 db 01100110 b1294 db 01100110 b1295 db 00000000 b1296 1297 db 00000000 b1298 db 01100110 b1299 db 01100110 b1300 db 00111100 b1301 db 00011000 b1302 db 00011000 b1303 db 00011000 b1304 db 00000000 b1305 1306 db 00000000 b1307 db 01111110 b1308 db 00001100 b1309 db 00011000 b1310 db 00110000 b1311 db 01100000 b1312 db 01111110 b1313 db 00000000 b1316TILE_PATTERNS.size: equ $ - TILE_PATTERNS1317System\Main.s27 Graphics/Sprites.s1SPRITE_PATTERNS:3SPRITE_INDEX_CURSOR_0: equ 0 * 44 6 DB 10000000b7 DB 11000000b8 DB 10100000b9 DB 10010000b10 DB 10001000b11 DB 10000100b12 DB 10000010b13 DB 10000001b14 DB 10000000b15 DB 10000000b16 DB 10000011b17 DB 10010010b18 DB 10101001b19 DB 11001001b20 DB 00000110b21 DB 00000000b22 DB 00000000b23 DB 00000000b24 DB 00000000b25 DB 00000000b26 DB 00000000b27 DB 00000000b28 DB 00000000b29 DB 00000000b30 DB 10000000b31 DB 01000000b32 DB 11000000b33 DB 00000000b34 DB 00000000b35 DB 00000000b36 DB 00000000b37 DB 00000000b38SPRITE_INDEX_CURSOR_1: equ 1 * 439 40 DB 00000000b41 DB 00000000b42 DB 01000000b43 DB 01100000b44 DB 01110000b45 DB 01111000b46 DB 01111100b47 DB 01111110b48 DB 01111111b49 DB 01111111b50 DB 01111100b51 DB 01101100b52 DB 01000110b53 DB 00000110b54 DB 00000000b55 DB 00000000b56 DB 00000000b57 DB 00000000b58 DB 00000000b59 DB 00000000b60 DB 00000000b61 DB 00000000b62 DB 00000000b63 DB 00000000b64 DB 00000000b65 DB 10000000b66 DB 00000000b67 DB 00000000b68 DB 00000000b69 DB 00000000b70 DB 00000000b71 DB 00000000b738392101110120129138147157166175184194203212221SPRITE_PATTERNS.size: equ $ - SPRITE_PATTERNSSystem\Main.s3031 Apps/Notepad/Header.s1Notepad:34.Header:6.processId: db 255 7.windowState: db WINDOW_STATE.RESTORED8.x: db 89.y: db 410.width: db 1311.height: db 812.minWidth: db 1013.minHeight: db 815.windowTitle:16 db TILE_FONT_REVERSED_LOWERCASE_A + 13 17 db TILE_FONT_REVERSED_LOWERCASE_A + 14 18 db TILE_FONT_REVERSED_LOWERCASE_A + 19 19 db TILE_FONT_REVERSED_LOWERCASE_A + 4 20 db TILE_FONT_REVERSED_LOWERCASE_A + 15 21 db TILE_FONT_REVERSED_LOWERCASE_A + 0 22 db TILE_FONT_REVERSED_LOWERCASE_A + 3 23 db 0 24 db 3325 db 3326 db 3327 db 3328 db 3329 db 3330 db 3331 db 3332 33.isFixedSize: db 034.vertScrollbarEnabled: db 035.vertScrollbarPosition: db 038.openAddr: dw .Open39.workAddr: dw .Work40.drawAddr: dw .Draw41.clickAddr: dw .Click42.closeAddr: dw .Close44.ramSize: dw 1024 46.StartProgramCode:48.Open:49 Apps/Notepad/Open.s14 7 ld l, (ix + PROCESS_STRUCT_IX.x) 8 ld h, (ix + PROCESS_STRUCT_IX.y) 9 call _CONVERT_COL_LINE_TO_LINEAR10 11 ld bc, NAMTBL + (32 * 2) + 112 add hl, bc14 16 call BIOS_SETWRT17 ld a, TILE_FONT_UPPERCASE_A + 0 18 out (PORT_0), a20 retApps/Notepad/Header.s51.Work:52 Apps/Notepad/Work.s14 7 ld l, (ix + PROCESS_STRUCT_IX.x) 8 ld h, (ix + PROCESS_STRUCT_IX.y) 9 call _CONVERT_COL_LINE_TO_LINEAR10 11 ld bc, NAMTBL + (32 * 5) + 1 12 add hl, bc14 16 call BIOS_SETWRT17 ld a, (OS.currentTime_Seconds)18 and 0000 1111 b 20 ld b, TILE_FONT_NUMBERS_0 + 021 add b22 out (PORT_0), a24 retApps/Notepad/Header.s54.Draw:55 Apps/Notepad/Draw.s1 2 3 retApps/Notepad/Header.s57.Click:58 Apps/Notepad/Click.s1 2 3 retApps/Notepad/Header.s60.Close:61 Apps/Notepad/Close.s1 2 3 retApps/Notepad/Header.s63.EndProgramCode: 64System\Main.s32 Apps/Calc/Header.s1Calc:34.Header:6.processId: db 255 7.windowState: db WINDOW_STATE.RESTORED8.x: db 8 + 139.y: db 1010.width: db 1011.height: db 812.minWidth: db 1013.minHeight: db 815.windowTitle:16 db TILE_FONT_REVERSED_LOWERCASE_A + 2 17 db TILE_FONT_REVERSED_LOWERCASE_A + 0 18 db TILE_FONT_REVERSED_LOWERCASE_A + 11 19 db TILE_FONT_REVERSED_LOWERCASE_A + 2 20 db 0 21 db 3322 db 3323 db 3324 db 3325 db 3326 db 3327 db 3328 db 3329 db 3330 db 3331 db 3332 33.isFixedSize: db 034.vertScrollbarEnabled: db 035.vertScrollbarPosition: db 038.openAddr: dw .Open39.workAddr: dw .Work40.drawAddr: dw .Draw41.clickAddr: dw .Click42.closeAddr: dw .Close44.ramSize: dw 1024 46.StartProgramCode:48.Open:49 Apps/Calc/Open.s14 7 ld l, (ix + PROCESS_STRUCT_IX.x) 8 ld h, (ix + PROCESS_STRUCT_IX.y) 9 call _CONVERT_COL_LINE_TO_LINEAR10 11 ld bc, NAMTBL + (32 * 2) + 112 add hl, bc14 16 call BIOS_SETWRT17 ld a, TILE_FONT_UPPERCASE_A + 1 18 out (PORT_0), a20 retApps/Calc/Header.s51.Work:52 Apps/Calc/Work.s14 7 ld l, (ix + PROCESS_STRUCT_IX.x) 8 ld h, (ix + PROCESS_STRUCT_IX.y) 9 call _CONVERT_COL_LINE_TO_LINEAR10 11 ld bc, NAMTBL + (32 * 4) + 112 add hl, bc14 16 call BIOS_SETWRT17 ld a, (OS.timeCounter)18 ld d, a 19 20 and 1111 0000 b21 srl a 22 srl a 23 srl a 24 srl a 25 ld b, TILE_FONT_NUMBERS_0 + 026 add b27 out (PORT_0), a29 ld a, d 30 and 0000 1111 b31 ld b, TILE_FONT_NUMBERS_0 + 032 add b33 out (PORT_0), a36 retApps/Calc/Header.s54.Draw:55 Apps/Calc/Draw.s1 2 3 retApps/Calc/Header.s57.Click:58 Apps/Calc/Click.s1 2 3 retApps/Calc/Header.s60.Close:61 Apps/Calc/Close.s1 2 3 retApps/Calc/Header.s63.EndProgramCode: 64System\Main.s36Execute:37 44 47 call _INIT49 50 ld hl, Calc.Header51 call _LOAD_PROCESS53 54 ld hl, Notepad.Header55 call _LOAD_PROCESS57 59 ld hl, OS.process_slot_160 61 call _SET_CURRENT_PROCESS62 63 69 73 77.OS_MainLoop:79 80 call _DRAW_MOUSE_CURSOR81 call _MOUSE_CLICK83 84 ld a, (OS.timeCounter)85 or a86 jp nz, .skip87 88 call _DRAW_TASKBAR_CLOCK90.skip:91 93 94 ld ix, (OS.currentProcessAddr)95 ld a, ixl96 or ixh97 jp z, .noCurrentProcess 99 ld e, (ix + PROCESS_STRUCT_IX.workAddr) 100 ld d, (ix + PROCESS_STRUCT_IX.workAddr + 1) 101 call JP_DE102 .noCurrentProcess:104 jp .OS_MainLoop108 db "End ROM started at 0x4000"110 ds PageSize - ($ - 0x4000), 255 114115 org 0xc000, 0xe5ff117 System/Ram.s13710121519RamStart:2123Seed: rw 125OS:27.mouseSpriteAttributes:28.mouseY: rb 129.mouseX: rb 130.mousePattern: rb 131.mouseColor: rb 132.mouseY_1: rb 133.mouseX_1: rb 134.mousePattern_1: rb 135.mouseColor_1: rb 137.mouseButton_1: rb 138.mouseButton_2: rb 140.keyboardMatrix: rb 10 42.ticksSinceLastInput: rw 1 46.currentTime: 47.currentTime_Hours: rb 148.currentTime_Minutes: rb 149.currentTime_Seconds: rb 151.currentDate: rb 3 53.timeCounter: rb 1 57.storeOldInterruptHook: rb 658.interruptBusy: rb 1616369.screenMapping: rb 32*2470.currentTileMouseOver: rb 1 73.currentProcessAddr: rw 1 74.nextAvailableProcessAddr: rw 17678.processes: 79 80 .process_slot_0: rb Process_struct.size81 .process_slot_1: rb Process_struct.size82 .process_slot_2: rb Process_struct.size83 .process_slot_3: rb Process_struct.size84.processes_end:85.processes_size: equ $ - .processes8789Process_struct:90.processId: rb 1 91.windowState: rb 1 92.x: rb 193.y: rb 194.width: rb 195.height: rb 196.minWidth: rb 197.minHeight: rb 199.windowTitle: rb 16100.isFixedSize: rb 1 101.vertScrollbarEnabled: rb 1 102.vertScrollbarPosition: rb 1103107112113.openAddr: rw 1114.workAddr: rw 1115.drawAddr: rw 1116.clickAddr: rw 1117.closeAddr: rw 1119.ramSize: rw 1 121122.ramStartAddr: rw 1123.vramStartTileAddr: rw 1125.size_without_screenTilesBehind: equ $ - Process_struct127.screenTilesBehind: rb 32*24129.size: equ $ - Process_struct131134PROCESS_STRUCT_IX:135.processId: equ Process_struct.processId - Process_struct136.windowState: equ Process_struct.windowState - Process_struct137.x: equ Process_struct.x - Process_struct138.y: equ Process_struct.y - Process_struct139.width: equ Process_struct.width - Process_struct140.height: equ Process_struct.height - Process_struct141.minWidth: equ Process_struct.minWidth - Process_struct142.minHeight: equ Process_struct.minHeight - Process_struct144.windowTitle: equ Process_struct.windowTitle - Process_struct145.isFixedSize: equ Process_struct.isFixedSize - Process_struct146.vertScrollbarEnabled: equ Process_struct.vertScrollbarEnabled - Process_struct147.vertScrollbarPosition: equ Process_struct.vertScrollbarPosition - Process_struct149.openAddr: equ Process_struct.openAddr - Process_struct150.workAddr: equ Process_struct.workAddr - Process_struct151.drawAddr: equ Process_struct.drawAddr - Process_struct152.clickAddr: equ Process_struct.clickAddr - Process_struct153.closeAddr: equ Process_struct.closeAddr - Process_struct156RamEnd:System\Main.s118